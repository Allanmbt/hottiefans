import{at as e,I as t,c as i,b as o,d as s,w as a,i as n,o as r,e as l,j as p,k as c,l as m,F as h,m as u,E as g,v as f,ad as d,O as v,f as b}from"./index-DyB-GtSf.js";import{_ as y}from"./n-navbar.DgJOiXYI.js";import{o as x,d as V,r as j}from"./uni-app.es.CYr7Wecl.js";import{_ as S}from"./n-list-cell.CFZ1yxA_.js";import{_ as H}from"./n-list.qlhvrMMX.js";import{_}from"./n-height.iPg7YRxT.js";import{i as L,_ as k,a as w,b as P,c as E,m as T,d as R,e as A}from"./data.BtYriC70.js";import"./n-icon.C34IfF9H.js";import"./n-popup.DWLeKhpE.js";import{c as I}from"./imgs.wUGTdslH.js";import{u as M}from"./useNav.y5ABEmWP.js";import{c as C,d as D}from"./system.Bdz65IDa.js";import{u as z}from"./element.B9OwrRfy.js";import"./n-badge.U9JWwHKe.js";import"./props.CkprGx8I.js";import"./usePager.Bx7XEHLh.js";import"./_plugin-vue_export-helper.BCo6x5W8.js";import"./n-button.C0Lbq8AA.js";import"./n-loading-indicator.BodNpqVl.js";const K={__name:"render-reverse",props:{type:{type:String,default:"1"}},setup(K){const{leftIcons:N,navLeftAction:O}=M(),q=e(),B=z(),F=[{icon:"add",text:"好友",iconType:"inverse",iconSize:"ss",textType:"inverse",textSize:"ss",textStyle:"margin-left:6rpx;",bgType:"error",style:"border-radius:60rpx;width:125rpx;height:25px;justify-content:center;"},{icon:"elipsis",style:"margin-left:36rpx;"}],Q=t({hasMorePage:!1,items:[],kbH:0,kbHeight:0,otherHeight:0,voiceVisible:!1,plusVisible:!1,emotionVisible:!1,moreVisible:!1,playingSrc:"",xh:0,platform:"",cp:1,inLoad:!1}),W=i((()=>Q.kbHeight||Q.otherHeight||0)),G=K;function J(e){}function U(e){Q.items.push({id:2,avatar:I.avatar.caiman,type:"image",msg:e}),Q.items.push({id:1,avatar:I.avatar.girl_nice,type:"image",msg:e}),me()}function X(){Q.voiceVisible=!Q.voiceVisible,Q.plusVisible=!1,Q.emotionVisible=!1,Q.voiceVisible?Q.otherHeight=g(276)-Q.xh:Q.otherHeight=0}function Y(){Q.voiceVisible=!1,Q.otherHeight=0}function Z(){Q.voiceVisible=!1,Q.otherHeight=0}function $(e){console.log(e),Q.voiceVisible=!1,Q.otherHeight=0,Q.items.push({id:2,avatar:I.avatar.caiman,type:"voice",msg:e}),Q.items.push({id:1,avatar:I.avatar.girl_nice,type:"voice",msg:e}),me()}function ee(e){e==Q.playingSrc?q.stop():(q.stop(),q.src=e,q.play())}function te(){Q.plusVisible=!Q.plusVisible,Q.plusVisible?Q.otherHeight=(Q.kbH||120)-Q.xh:Q.otherHeight=0,Q.emotionVisible=!1,Q.voiceVisible=!1}function ie(){f({url:"/pages/chat/collected"})}function oe(){Q.emotionVisible=!Q.emotionVisible,Q.emotionVisible?Q.otherHeight=160-Q.xh:Q.otherHeight=0,Q.plusVisible=!1,Q.voiceVisible=!1}function se(e){d("chatEmj",e)}function ae(){d("chatDelEmj")}function ne(e){console.log(e),Q.items.push({id:2,avatar:I.avatar.caiman,type:"text",msg:e}),Q.items.push({id:1,avatar:I.avatar.girl_nice,type:"text",msg:e}),me(),console.log(B,B.inputtoolbar),B.inputtoolbar.clear()}function re(e){Q.kbHeight=e.height,e.height>0&&(Q.kbH=e.height,Q.otherHeight=0,Q.voiceVisible=!1,Q.emotionVisible=!1,Q.plusVisible=!1),me()}function le(){Q.inLoad=!0,Q.items=E,Q.inLoad=!1,me()}function pe(){if(console.log("加载更多"),Q.inLoad)return;Q.inLoad=!0,Q.cp+=1;const e=[];[1,2,3,4,5,6,7,8,9,10].forEach((t=>{e.push({id:2,avatar:I.avatar.caiman,type:"text",msg:10*Q.cp+t+"只蝴蝶飞"}),e.push({id:1,avatar:I.avatar.girl_nice,type:"text",msg:10*Q.cp+t+"只蛤蟆叫"})})),Q.items=e.concat(Q.items),Q.inLoad=!1}function ce(){Q.moreVisible=!0}function me(){let e=B.list.nScrollToBottom;v((()=>{e()}))}return x((()=>{Q.platform=C(),Q.hasMorePage="2"==G.type,Q.xh=D(),q.onEnded((()=>{Q.playingSrc=""})),q.onPause((()=>{Q.playingSrc=""})),q.onStop((()=>{Q.playingSrc=""})),q.onPlay((()=>{Q.playingSrc=q.src})),q.onError((()=>{Q.playingSrc=""}))})),V((()=>{q.offEnded(),q.offPause(),q.offStop(),q.offPlay(),q.offError()})),(e,t)=>{const i=j(o("n-navbar"),y),g=n,f=j(o("n-list-cell"),S),d=j(o("n-list"),H),v=j(o("n-height"),_);return r(),s(g,null,{default:a((()=>[l(i,{lefts:p(N),title:"本人张翠花",rights:F,leftStyle:"width:90rpx;",centerStyle:"width:300rpx;justify-content:flex-start !important;",rightStyle:"width:360rpx;",onRightAction:J,onLeftAction:p(O)},null,8,["lefts","onLeftAction"]),l(d,{ref:e=>p(B).set(e,"list"),bgType:"primary",renderReverse:!0,down:null,up:null,height:"window-!status-!nav-!x",onInited:le},{default:a((()=>[l(f,{renderReverse:!0,keepScrollPosition:!0},{default:a((()=>[l(g,{style:{height:"26rpx"},onAppear:pe})])),_:1}),(r(!0),c(h,null,m(Q.items,((t,i)=>(r(),s(f,{key:i,renderReverse:!0,keepScrollPosition:!0},{default:a((()=>["text"==t.type?(r(),s(T,{key:0,isLeft:1===t.id,avatar:t.avatar,msg:t.msg,onMore:ce},null,8,["isLeft","avatar","msg"])):b("",!0),"image"==t.type?(r(),s(R,{key:1,isLeft:1===t.id,avatar:t.avatar,src:t.msg},null,8,["isLeft","avatar","src"])):b("",!0),"voice"==t.type?(r(),s(A,{key:2,isLeft:1===t.id,avatar:t.avatar,src:t.msg,current:e.playingSrc,onPlay:ee},null,8,["isLeft","avatar","src","current"])):b("",!0),l(g,{style:{height:"76rpx"}})])),_:2},1024)))),128))])),_:1},512),l(L,{ref:e=>p(B).set(e,"inputtoolbar"),onKb:re,onImage:U,onPlus:te,onEmotion:oe,onRecord:X,onConfirm:ne},null,512),l(g,{style:u({height:W.value+"px"})},null,8,["style"]),l(v,{height:"x",bgType:"inverse"}),l(k,{show:Q.voiceVisible,onShort:Z,onVoice:$,onCancel:Y},null,8,["show"]),l(w,{show:Q.plusVisible,height:Q.kbH,onCollect:ie},null,8,["show","height"]),l(P,{show:Q.emotionVisible,onSelect:se,onDelete:ae},null,8,["show"])])),_:1})}}};export{K as default};

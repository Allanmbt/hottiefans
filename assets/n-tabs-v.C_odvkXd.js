import{r as t,c as e,K as a,J as i,L as s,d as l,w as o,n,m as r,M as c,G as u,o as d,e as p,N as y,f as v,k as h,l as x,F as m,E as f,O as g,i as T,h as b,t as S,q as w}from"./index-DyB-GtSf.js";import{m as C}from"./props.CkprGx8I.js";import{_}from"./_plugin-vue_export-helper.BCo6x5W8.js";const I=_({__name:"n-tabs-v",props:C([["items",[]],["value",0],"textLabel",["justify","flex-start"],["scrollSize","750rpx"],["textSize","base"],["activeTextSize","base"],["bgType","inverse"],["textType","text"],["activeTextType","primary"],["height","80rpx"],["width","120rpx"],"border",["top","0"],["bottom","0"],["animated",!0],["hasIndicator",!0],["indicatorType","primary"],["indicatorWidth","5rpx"],["indicatorHeight","40rpx"],["indicatorRadius","4rpx"],["indicatorLeft","6rpx"],"boxStyle","textStyle","activeTextStyle","itemStyle","activeItemStyle","indicatorStyle",["updateTime",0],["delay",-1],["updateDelay",-1],["hoverTop",!1],"boxClass","tabsClass","textClass","activeTextClass","itemClass","activeItemClass","indicatorClass"]),emits:["update:value","change"],setup(C,{emit:_}){const I=C,z=_,{proxy:$}=c(),j=t(0),k=t(0),L=t({}),D=t(0);t(0);const H=t(null);const K=e((()=>{let t=`width:${I.indicatorWidth};border-radius:${I.indicatorRadius};`;return t+=`top:${k.value}px;`,t+=`height:${j.value}px;`,t+=`left:${I.indicatorLeft};`,I.animated||(t+="transition-duration: 0ms;"),t+I.indicatorStyle})),O=e((()=>I.scrollSize.indexOf("rpx")>0?f(parseInt(I.scrollSize||0)):parseInt(I.scrollSize||0))),R=e((()=>parseInt(I.indicatorHeight)>0)),W=e((()=>parseInt(I.indicatorHeight)>0?I.indicatorHeight:"0")),q=e((()=>{const t=parseInt(W.value);return f(t)})),E=e((()=>{let t="";return t+="height:"+I.scrollSize+";",t+="width:"+I.width+";",t+I.boxStyle})),F=e((()=>{let t=`flex-direction:column;justify-content:${I.justify};`;return"center"!==I.justify&&"flex-end"!==I.justify&&"space-between"!==I.justify||(t+="height:"+I.scrollSize+";"),t})),G=e((()=>{let t=`width:${I.width};`;return parseInt(I.height)>0&&(t+=`height:${I.height};`),t+I.itemStyle}));async function J(t){let e=0,a=0,i=0,s=0,l=0;const o=L.value.scroll;if(o)l=o.top;else try{l=(await N(-100)).top,L.value.scroll={top:l}}catch(u){}const n=L.value["item"+t];if(n)a=n.top,e=n.height,i=n.ind,s=n.indTop;else try{const o=await N(t);a=o.top-l,e=o.height,i=R.value?q.value:e,s=a+.5*(e-i),L.value["item"+t]={height:e,top:a,ind:i,indTop:s}}catch(u){}const r=a+e;j.value=i,k.value=s;const c=r-e/2-O.value/2;c>0?D.value=c:0===D.value?D.value=.1:D.value=0}async function M(){let t=0;try{t=(await N(-100)).top,L.value.scroll={top:t}}catch(e){}for(const a in I.items)try{const e=await N(a);let i=e.height;R.value&&(i=q.value);const s=e.top-t;L.value["item"+a]={height:e.height,top:s,ind:i,indTop:s+.5*(e.height-i)}}catch(e){}}function N(t){return new Promise(((e,a)=>{let i="#item"+t;-100===t&&(i="#nscroll");s().in($).select(i).fields({size:!0,rect:!0},(t=>{t?e(t):a({})})).exec()}))}return a((async()=>{I.delay>=0?setTimeout((async()=>{await M(),J(I.value)}),I.delay):(await M(),J(I.value))})),i((()=>I.value),(t=>{J(t)})),i((()=>I.items),(()=>{L.value={},g((async()=>{I.updateDelay>=0?setTimeout((async()=>{await M(),J(I.value)}),I.updateDelay):(await M(),J(I.value))}))})),i((()=>I.updateTime),(async()=>{L.value={},await M(),J(I.value)})),(t,e)=>{const a=T,i=w,s=u;return d(),l(s,{ref_key:"nscroll",ref:H,id:"nscroll","scroll-y":!0,"scroll-top":D.value,"scroll-with-animation":!0,"show-scrollbar":!1,class:n(["n-bg-"+t.bgType,"n-tabs-scroll",t.boxClass]),style:r(E.value)},{default:o((()=>[p(a,{class:n(["n-position-relative",t.tabsClass]),style:r(F.value)},{default:o((()=>[t.hasIndicator&&!t.hoverTop?(d(),l(a,{key:0,class:n(["n-position-absolute","n-tab-item-indicator","n-bg-"+(t.indicatorType&&t.indicatorType.length>0?t.indicatorType:"text"),t.indicatorClass]),style:r(K.value)},{default:o((()=>[y(t.$slots,"indicator",{},void 0,!0)])),_:3},8,["class","style"])):v("",!0),p(a,{style:r({height:t.top})},null,8,["style"]),(d(!0),h(m,null,x(t.items,((e,s)=>(d(),l(a,{key:s,ref_for:!0,ref:t=>{},id:"item"+s,class:n(["n-flex-row","n-align-center",t.itemClass,s===t.value?t.activeItemClass:""]),style:r(G.value+(s===t.value?t.activeItemStyle:"")),onClick:t=>function(t,e=!0){z("change",t)}(s)},{default:o((()=>[p(i,{class:n(["n-color-"+(s===t.value?t.activeTextType:t.textType),"n-size-"+(s===t.value?t.activeTextSize:t.textSize),t.textClass,s===t.value?t.activeTextClass:""]),style:r(t.textStyle+(s===t.value?t.activeTextStyle:""))},{default:o((()=>[b(S(t.textLabel?e[t.textLabel]:e),1)])),_:2},1032,["class","style"])])),_:2},1032,["id","class","style","onClick"])))),128)),p(a,{style:r({height:t.bottom})},null,8,["style"]),t.hasIndicator&&t.hoverTop?(d(),l(a,{key:1,class:n(["n-tab-item-indicator","n-bg-"+(t.indicatorType&&t.indicatorType.length>0?t.indicatorType:"text"),t.indicatorClass]),style:r(K.value)},{default:o((()=>[y(t.$slots,"indicator",{},void 0,!0)])),_:3},8,["class","style"])):v("",!0)])),_:3},8,["class","style"])])),_:3},8,["scroll-top","class","style"])}}},[["__scopeId","data-v-6d5ff359"]]);export{I as _};

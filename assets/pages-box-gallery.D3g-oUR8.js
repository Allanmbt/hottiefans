import{_ as e}from"./n-navbar.DgJOiXYI.js";import{r as l,a3 as t,c as a,J as n,o as s,d as i,w as r,e as u,m as o,N as c,i as f,a5 as m,K as d,a2 as v,G as p,b as h,j as g,k as y,l as w,F as x}from"./index-DyB-GtSf.js";import{o as _,r as S}from"./uni-app.es.CYr7Wecl.js";import{m as j}from"./props.CkprGx8I.js";import{c as T,b,f as F}from"./system.Bdz65IDa.js";import{_ as $}from"./_plugin-vue_export-helper.BCo6x5W8.js";import{_ as k}from"./n-list-cell.CFZ1yxA_.js";import{_ as M}from"./n-list.qlhvrMMX.js";import{c as L}from"./calendarGoods.Bvy3hzex.js";import{u as G}from"./useNav.y5ABEmWP.js";import"./n-icon.C34IfF9H.js";import"./n-badge.U9JWwHKe.js";import"./usePager.Bx7XEHLh.js";import"./element.B9OwrRfy.js";import"./n-button.C0Lbq8AA.js";import"./n-loading-indicator.BodNpqVl.js";import"./imgs.wUGTdslH.js";const I={__name:"n-gallery-item",setup(e){const m=l(0),d=l(!1),v=l(!1),p=l(""),h=l(null),g=t("nGallery"),y=a((()=>g?g.mrItemStyle.value:"")),w=a((()=>g&&d.value?g.firstMargin.value:"")),x=a((()=>g&&v.value?g.lastMargin.value:""));function _(){g.emitEvent(m.value)}return m.value=g.children.value.length,g.pushChild({index:m.value,ngalleryitem:h,fitStyles:function(e){m.value==e?p.value="transition-property:transform;transform:scale(1,1);transition-duration:200ms;":p.value="transition-property:transform;transform:scale(0.92,0.86);transition-duration:200ms;"}}),n(g.initTime,(()=>{!function(){0===m.value&&(d.value=!0);m.value===g.children.value.length-1&&(v.value=!0)}()})),(e,l)=>{const t=f;return s(),i(t,{class:"n-flex-row n-overflow-hidden",style:o(y.value+w.value+x.value+p.value),onClick:_},{default:r((()=>[u(t,{ref_key:"ngalleryitem",ref:h,class:"n-overflow-hidden",style:o(y.value)},{default:r((()=>[c(e.$slots,"default")])),_:3},8,["style"])])),_:3},8,["style"])}}},O=$({__name:"n-gallery",props:j([["width","750rpx"],["height","360rpx"],["widthScale",.7],["heightScale",.8],["scaleFactor",.5],["space","0"],["left","0"],["right","0"],"boxStyle","itemStyle",["updateTime",0]]),emits:["selected","change"],setup(e,{emit:t}){const h=e,g=t;let y=null;T(),l(0);const w=l(0),x=l([]),_=l(0),S=l(null);l(null);const j=a((()=>h.boxStyle+`width:${$.value}px;height:${M.value}px;`)),$=a((()=>b(h.width))),k=a((()=>h.width.indexOf("rpx")>0||h.width.indexOf("upx")>0||h.width.indexOf("px")<0?parseFloat(h.width):F()*parseFloat(h.width))),M=a((()=>b(h.height)));a((()=>($.value+L.value)*(h.scaleFactor>0?h.scaleFactor:.5))),a((()=>(k.value+G.value)*(h.scaleFactor>0?h.scaleFactor:.5)));const L=a((()=>$.value*h.widthScale)),G=a((()=>k.value*h.widthScale)),I=a((()=>M.value*h.heightScale)),O=a((()=>`margin-left:${$.value*(1-h.widthScale)*.5}px;`)),A=a((()=>`margin-right:${$.value*(1-h.widthScale)*.5}px;`)),C=a((()=>h.itemStyle+`width:${L.value}px;height:${I.value}px;`));function N(e=!1){0!==x.value.length&&(_.value=_.value+1,e?setTimeout((()=>{w.value=1}),60):w.value=1)}function D(e){!function(e){const l=Math.round(e/L.value);g("change",l);const t=w.value,a=l*L.value;for(const n in x.value){x.value[n].fitStyles(l)}if(Math.abs(a-e)<=2)return;if(t!=a)return void(w.value=a);t===a&&(w.value=0,w.value=a+.1)}(e.detail.scrollLeft)}function E(e){y&&clearTimeout(y),y=null,y=setTimeout((()=>{D(e)}),100)}return m("nGallery",{initTime:_,firstMargin:O,lastMargin:A,mrItemStyle:C,children:x,pushChild:function(e){x.value.push(e)},emitEvent:function(e){g("selected",e)}}),n((()=>h.updateTime),(()=>{N()})),d((()=>{N(!0)})),v((()=>{y&&clearTimeout(y)})),(e,l)=>{const t=f,a=p;return s(),i(a,{ref_key:"ngallery",ref:S,class:"n-flex-row","enable-flex":!0,"scroll-with-animation":!0,"scroll-x":!0,"scroll-y":!1,"scroll-left":w.value,style:o(j.value),onScroll:E},{default:r((()=>[u(t,{class:"n-flex-row n-wrap-nowrap n-shrink-0"},{default:r((()=>[c(e.$slots,"default",{},void 0,!0)])),_:3})])),_:3},8,["scroll-left","style"])}}},[["__scopeId","data-v-a392e612"]]),A={__name:"gallery",setup(t){const{leftIcons:a,navLeftAction:n}=G(),o=l([1,2,3,4,5]),c=l([]),m=l(0);return _((()=>{setTimeout((()=>{c.value=[1,2,3,4,5,6],setTimeout((()=>{m.value=Date.now()}),100)}),2e3)})),(l,t)=>{const d=S(h("n-navbar"),e),v=S(h("n-gallery-item"),I),p=S(h("n-gallery"),O),_=S(h("n-list-cell"),k),j=S(h("n-list"),M),T=f;return s(),i(T,null,{default:r((()=>[u(d,{lefts:g(a),title:"画廊",onLeftAction:g(n)},null,8,["lefts","onLeftAction"]),u(j,{down:null,up:null},{default:r((()=>[u(_,null,{default:r((()=>[u(p,{width:"750rpx",height:"1000rpx",widthScale:.827,heightScale:.84},{default:r((()=>[(s(!0),y(x,null,w(o.value,((e,l)=>(s(),i(v,{key:l},{default:r((()=>[u(L)])),_:2},1024)))),128))])),_:1})])),_:1}),u(_,null,{default:r((()=>[u(p,{ref:"aysnc-gallery",updateTime:m.value,width:"750rpx",height:"1000rpx",widthScale:.827,heightScale:.84},{default:r((()=>[(s(!0),y(x,null,w(c.value,((e,l)=>(s(),i(v,{key:l},{default:r((()=>[u(L)])),_:2},1024)))),128))])),_:1},8,["updateTime"])])),_:1})])),_:1})])),_:1})}}};export{A as default};

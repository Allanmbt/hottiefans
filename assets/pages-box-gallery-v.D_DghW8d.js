import{_ as e}from"./n-navbar.DgJOiXYI.js";import{r as t,a3 as l,c as a,o as n,d as s,w as r,e as o,m as i,N as u,i as c,a5 as v,J as m,K as f,a2 as h,G as p,b as d,j as g,k as y,l as x,F as S}from"./index-DyB-GtSf.js";import{o as _,r as j}from"./uni-app.es.CYr7Wecl.js";import{m as w}from"./props.CkprGx8I.js";import{c as b,b as $,g as M}from"./system.Bdz65IDa.js";import{c as L}from"./calendarGoods.Bvy3hzex.js";import{u as T}from"./useNav.y5ABEmWP.js";import"./n-icon.C34IfF9H.js";import"./_plugin-vue_export-helper.BCo6x5W8.js";import"./n-badge.U9JWwHKe.js";import"./n-button.C0Lbq8AA.js";import"./n-loading-indicator.BodNpqVl.js";import"./imgs.wUGTdslH.js";const k={__name:"n-gallery-v-item",setup(e){const v=t(0),m=t(!1),f=t(!1),h=t(""),p=t(null),d=l("nGalleryV");v.value=d.children.value.length,d.pushChild({index:v.value,ngalleryvitem:p,initLayout:function(){0===v.value&&(m.value=!0);v.value===d.children.value.length-1&&(f.value=!0)},fitStyles:function(e){v.value==e?h.value="transition-property:transform;transform:scale(1,1);transition-duration:200ms;":h.value="transition-property:transform;transform:scale(0.86,0.92);transition-duration:200ms;"}});const g=a((()=>d.mrItemStyle.value)),y=a((()=>m.value?d.firstMargin.value:"")),x=a((()=>f.value?d.lastMargin.value:""));function S(){d.emitEvent(v.value)}return(e,t)=>{const l=c;return n(),s(l,{class:"n-flex-row n-justify-center n-overflow-hidden",style:i(g.value+y.value+x.value+h.value),onClick:S},{default:r((()=>[o(l,{ref_key:"ngalleryvitem",ref:p,class:"n-overflow-hidden",style:i(g.value)},{default:r((()=>[u(e.$slots,"default")])),_:3},8,["style"])])),_:3},8,["style"])}}},F={__name:"n-gallery-v",props:w([["scrollHeight","750rpx"],["width","750rpx"],["height","360rpx"],["widthScale",.7],["heightScale",.8],["scaleFactor",.5],["space","0"],["top","0"],["bottom","0"],"boxStyle","itemStyle",["updateTime",0]]),emits:["change","selected"],setup(e,{emit:l}){const o=e,c=l;b();let d=null;const g=t(0),y=t([]);t(null);const x=t(null),S=a((()=>`width:${_.value}px;height:${o.scrollHeight};`+o.boxStyle)),_=a((()=>$(o.width))),j=a((()=>$(o.height)));a((()=>(j.value+M.value)*(o.scaleFactor>0?o.scaleFactor:.5)));const w=a((()=>_.value*o.widthScale)),M=a((()=>j.value*o.heightScale)),L=a((()=>`margin-top:${j.value*(1-o.heightScale)*.5}px;`)),T=a((()=>`margin-bottom:${j.value*(1-o.heightScale)*.5}px;`)),k=a((()=>o.itemStyle+`width:${w.value}px;height:${M.value}px;`));function F(e=!1){if(0!==y.value.length){for(const e in y.value){y.value[e].initLayout()}e?setTimeout((()=>{g.value=1}),60):g.value=1}}function G(e){!function(e){const t=Math.round(e/M.value);c("change",t);const l=g.value,a=t*M.value;for(const n in y.value){y.value[n].fitStyles(t)}if(Math.abs(a-e)<=2)return;if(l!=a)return void(g.value=a);l===a&&(g.value=0,g.value=a+.1)}(e.detail.scrollTop)}function H(e){d&&clearTimeout(d),d=null,d=setTimeout((()=>{G(e)}),100)}return v("nGalleryV",{children:y,firstMargin:L,lastMargin:T,mrItemStyle:k,pushChild:function(e){y.value.push(e)},emitEvent:function(e){c("selected",e)}}),m((()=>o.updateTime),(()=>{F()})),f((()=>{F(!0)})),h((()=>{})),(e,t)=>{const l=p;return n(),s(l,{ref_key:"ngalleryv",ref:x,class:"n-flex-column n-align-center","enable-flex":!0,"scroll-with-animation":!0,"scroll-top":g.value,"scroll-y":!0,"show-scrollbar":!1,style:i(S.value),onScroll:H},{default:r((()=>[u(e.$slots,"default")])),_:3},8,["scroll-top","style"])}}},G={__name:"gallery-v",setup(l){const{leftIcons:a,navLeftAction:i}=T(),u=t([1,2,3,4,5]),v=t(500);return _((()=>{v.value=M("window-!status-!nav-!x")})),(t,l)=>{const m=j(d("n-navbar"),e),f=j(d("n-gallery-v-item"),k),h=j(d("n-gallery-v"),F),p=c;return n(),s(p,null,{default:r((()=>[o(m,{lefts:g(a),title:"竖向画廊",onLeftAction:g(i)},null,8,["lefts","onLeftAction"]),o(h,{scrollHeight:v.value+"px",width:"750rpx",height:"1000rpx",widthScale:.827,heightScale:.84},{default:r((()=>[(n(!0),y(S,null,x(u.value,((e,t)=>(n(),s(f,{key:t},{default:r((()=>[o(L)])),_:2},1024)))),128))])),_:1},8,["scrollHeight"])])),_:1})}}};export{G as default};

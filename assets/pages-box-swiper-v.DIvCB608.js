import{_ as e}from"./n-navbar.DgJOiXYI.js";import{a3 as t,r as n,c as a,d as i,w as l,j as s,n as r,m as u,i as o,o as c,N as p,a4 as d,a5 as v,K as f,J as h,a2 as m,b as x,e as g,h as y,k as $,l as b,F as w,q as P,t as _}from"./index-DyB-GtSf.js";import{r as j}from"./uni-app.es.CYr7Wecl.js";import{m as C}from"./props.CkprGx8I.js";import{u as F}from"./element.B9OwrRfy.js";import{b as H}from"./system.Bdz65IDa.js";import{u as L}from"./useNav.y5ABEmWP.js";import"./n-icon.C34IfF9H.js";import"./_plugin-vue_export-helper.BCo6x5W8.js";import"./n-badge.U9JWwHKe.js";const Y={__name:"n-swiper-v-item",props:C(["bgType","border","radius",["flex","column"],["justify","center"],["align","center"],"boxStyle","boxClass"]),setup(e){const d=t("nSwiperV"),v=n(0),f=F();v.value=d.children.length,d.pushChild({index:v,nswipervitem:f,getExp:function(e){const t=d.itemHeightPx.value+d.spacePx.value;let n=-e*t;const a=v.value;if(d.children.length,d.circular.value&&(n=x(t,e,a,!0),""===n))return"0+"+5*t;return`y+${n}`},getScaleExp:function(e){const t=`${d.scale.value}+0`,n=d.itemHeightPx.value+d.spacePx.value,a=`max(1 - abs(y/${n}), ${d.scale.value})`,i=`min(1, ${d.scale.value}+abs(y/${n}))`,l=d.circular.value,s=v.value,r=d.children.length;let u=t;e===s?u=a:(e-1===s?u=`y>=0?${i}:${t}`:e+1===s&&(u=`y>=0?${t}:${i}`),l&&(0===e&&s===r-1?u=`y>=0?${i}:${t}`:e===r-1&&0===s&&(u=`y>=0?${t}:${i}`)));return u},toAdjust:function(e,t,n){const a=d.inCurrent.value,i=d.circular.value,l=d.children.length,s=v.value;let r=d.duration.value;const u=d.itemHeightPx.value+d.spacePx.value;let o=d.scale.value;let c=Math.abs(e)>=.4*u;c||t<=60&&Math.abs(e)>=30&&(c=!0);let p=a;c&&(p=e>0?a-1:a+1,p<0?p=i?l-1:0:p>=l&&(p=i?0:l-1));p===s&&(o=1);let h=u*p*-1;if(i){if(n)return void function(e,t,n,a){const i=d.duration.value,l=x(e,t,n);let s=0;t===n&&(s=1);animation.transition(f.el,{styles:{opacity:`${s}`},duration:0,delay:0,timingFunction:d.timingFunction.value||"ease",needLayout:!1},(e=>{animation.transition(f.el,{styles:{transform:`translateY(${l}px) scale(${a})`,opacity:s},duration:i,delay:0,timingFunction:d.timingFunction.value||"ease",needLayout:!1},(e=>{d.inCurrent.value=t,d.inMoving.value=!1,0===s&&m(l,a)}))}))}(u,a,s,o);h=x(u,a,s),a!=p&&(h+=e>=0?u:-u)}animation.transition(f.el,{styles:{transform:`translateY(${h}px) scale(${o})`},duration:r,delay:0,timingFunction:d.timingFunction.value||"ease",needLayout:!1},(e=>{d.inCurrent.value=p,d.inMoving.value=!1,c&&i&&function(e,t,n,a){const i=d.scale.value;let l=!1;t===a-1&&0===n?l=!0:0===t&&n===a-1?l=!1:t<n&&(l=!0);if(l){let l=t-2;l+1<0&&(l=a-2),l<0&&(l=a-1);let s=n+2;return s-1>=a&&(s=1),s>=a&&(s=0),v.value===l&&animation.transition(f.el,{styles:{opacity:0,transform:`translateY(${5*e}px) scale(${i})`},duration:0,delay:0,needLayout:!1},(t=>{m(5*e,i)})),void(v.value===s&&animation.transition(f.el,{styles:{opacity:0,transform:`translateY(${-1*e*(s-2)}px) scale(${i})`},duration:0,delay:0,needLayout:!1},(t=>{m(-1*e*(s-2),i)})))}let s=t+2;s-1>=a&&(s=1);s>=a&&(s=0);let r=n-2;r+1<0&&(r=a-2);r<0&&(r=a-1);v.value===s&&animation.transition(f.el,{styles:{opacity:0,transform:`translateY(${5*e}px) scale(${i})`},duration:0,delay:0,needLayout:!1},(t=>{m(5*e,i)}));v.value===r&&animation.transition(f.el,{styles:{opacity:0,transform:`translateY(${-1*e*(r+2)}px) scale(${i})`},duration:0,delay:0,needLayout:!1},(t=>{m(-1*e*(r+2),i)}))}(u,a,p,l)}))}});const h=a((()=>{let e="",t=d.leftPx.value+d.spacePx.value*v.value+d.itemHeightPx.value*v.value;return d.center.value&&(t=.5*(d.heightPx.value-d.itemHeightPx.value)+d.spacePx.value*v.value+d.itemHeightPx.value*v.value),e+=`top:${t}px;width:${d.itemWidthPx.value}px;height:${d.itemHeightPx.value}px;`,e}));function m(e,t){animation.transition(f.el,{styles:{transform:`translateY(${e}px) scale(${t})`,opacity:1},duration:0,delay:0,timingFunction:d.timingFunction.value||"ease",needLayout:!1},(e=>{}))}function x(e,t,n,a){const i=d.children.length;let l=e*t*-1,s=t-1,r=t-2;s<0&&(s=i-1,r=i-2),r<0&&(r=i-1);let u=t+1,o=t+2;if(u>=i&&(u=0,o=1),o>=i&&(o=0),n===s)l=e*(s+1)*-1;else if(n===u)l=e*(u-1)*-1;else if(n===r)l=e*(r+2)*-1;else if(n===o)l=e*(o-2)*-1;else if(n!=t){if(a)return"";l=5*e}return l}return(e,t)=>{const n=o;return c(),i(n,{ref:e=>s(f).set(e),class:r(["n-position-absolute","n-bg-"+e.bgType,"n-border-"+e.border,"n-radius-"+e.radius,"n-flex-"+e.flex,"n-align-"+e.align,"n-justify-"+e.justify,e.boxClass]),style:u(h.value+e.boxStyle)},{default:l((()=>[p(e.$slots,"default")])),_:3},8,["class","style"])}}},S={__name:"n-swiper-v",props:C([["width","750rpx"],["height","360rpx"],["itemWidth","600rpx"],["itemHeight","360rpx"],["left","0"],["right","0"],["space","64rpx"],["current",0],["autoPlay",!1],["interval",2e3],["circular",!1],["center",!1],["scale",.62],["duration",300],["timingFunction","ease-in-out"],["updateTime",0],"boxStyle","boxClass"]),emits:["change"],setup(e,{expose:t,emit:x}){const g=e,y=x;let $=null;const b=[],w=n(0),P=n(!1),_=n(null),{center:j,duration:C,linear:L,circular:Y,scale:S,timingFunction:T}=d(g),M=F(),k=a((()=>H(g.left)));a((()=>H(g.right)));const A=a((()=>H(g.space))),E=a((()=>H(g.width))),W=a((()=>H(g.height))),z=a((()=>H(g.itemWidth))),I=a((()=>H(g.itemHeight))),D=a((()=>`width:${E.value}px;height:${W.value}px;`));function V(e=0,t=1e3,n){0!==b.length&&(P.value=!0,b.forEach((a=>{a.toAdjust(e,t,n)})))}function X(e){if(P.value)return;_.value&&clearInterval(_.value),_.value=null,P.value=!0;const t=[],n=w.value;b.forEach((e=>{t.push({element:e.nswipervitem.el.ref,property:"transform.scale",expression:e.getScaleExp(n)}),t.push({element:e.nswipervitem.el.ref,property:"transform.translateY",expression:e.getExp(n)})}));const a=Date.now(),i=bindingX.bind({eventType:"pan",anchor:M.el.ref,props:t},(e=>{const t=Date.now();"end"==e.state&&(V(e.deltaY,t-a),bindingX.unbind({eventType:"pan",token:$}),$=0)}));$=i.token}return t({inMoving:P,inCurrent:w,children:b,playTimer:_,toAdjust:V}),v("nSwiperV",{children:b,inMoving:P,inCurrent:w,center:j,duration:C,linear:L,circular:Y,scale:S,timingFunction:T,leftPx:k,spacePx:A,widthPx:E,itemWidthPx:z,heightPx:W,itemHeightPx:I,pushChild:function(e){b.push(e)},emitChange:function(e){y("change",e)}}),f((()=>{if(b.length>0){if(console.log("mounted"),g.circular)return console.log("circular"),void V(0,1e3,!0);V()}})),h((()=>g.updateTime),(()=>{g.circular?V(0,1e3,!0):V()})),h(P,(e=>{!e&&g.autoPlay&&g.circular&&(_.value&&clearInterval(_.value),_.value=setInterval((()=>{V(-50,40)}),g.interval))})),m((()=>{$&&(bindingX.unbind({eventType:"pan",token:$}),$=0)})),(e,t)=>{const n=o;return c(),i(n,{ref:e=>s(M).set(e),class:r(["n-position-relative","n-overflow-hidden",e.boxClass]),style:u(D.value+e.boxStyle),onVerticalpan:X},{default:l((()=>[p(e.$slots,"default")])),_:3},8,["class","style"])}}},T={__name:"swiper-v",setup(t){const{leftIcons:a,navLeftAction:r}=L(),u=n([1,2,3,4]),p=n([1,2,3,4,5,6]);return(t,n)=>{const d=j(x("n-navbar"),e),v=P,f=o,h=j(x("n-swiper-v-item"),Y),m=j(x("n-swiper-v"),S);return c(),i(f,null,{default:l((()=>[g(d,{lefts:s(a),title:"swiper-v",onLeftAction:s(r)},null,8,["lefts","onLeftAction"]),g(f,{class:"n-flex-row n-align-center",style:{height:"86rpx"}},{default:l((()=>[g(v,{class:"n-color-third n-size-base",style:{"margin-left":"32rpx"}},{default:l((()=>[y("circle:false center:false")])),_:1})])),_:1}),g(m,{left:"64rpx",space:"-30rpx",width:"750rpx",height:"500rpx",itemWidth:"520rpx",itemHeight:"300rpx"},{default:l((()=>[(c(!0),$(w,null,b(u.value,((e,t)=>(c(),i(h,{key:t},{default:l((()=>[g(f,{class:"n-flex-row n-justify-center n-align-center n-bg-success",style:{width:"520rpx",height:"300rpx"}},{default:l((()=>[g(v,{class:"n-size-ll n-weight-9 n-color-inverse"},{default:l((()=>[y(_(t),1)])),_:2},1024)])),_:2},1024)])),_:2},1024)))),128))])),_:1}),g(f,{class:"n-flex-row n-align-center",style:{height:"86rpx"}},{default:l((()=>[g(v,{class:"n-color-third n-size-base",style:{"margin-left":"32rpx"}},{default:l((()=>[y("circle:true center:true autoPlay:true")])),_:1})])),_:1}),g(m,{circular:!0,center:!0,autoPlay:!0,width:"750rpx",space:"0rpx",height:"500rpx",itemWidth:"360rpx",itemHeight:"300rpx"},{default:l((()=>[(c(!0),$(w,null,b(p.value,((e,t)=>(c(),i(h,{key:t},{default:l((()=>[g(f,{class:"n-flex-row n-justify-center n-align-center n-bg-success",style:{width:"360rpx",height:"300rpx"}},{default:l((()=>[g(v,{class:"n-size-ll n-weight-9 n-color-inverse"},{default:l((()=>[y(_(t),1)])),_:2},1024)])),_:2},1024)])),_:2},1024)))),128))])),_:1})])),_:1})}}};export{T as default};

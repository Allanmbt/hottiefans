import{r as e,c as t,K as a,J as s,L as l,b as i,d as n,w as r,n as o,m as d,M as c,G as u,o as y,e as f,N as p,f as v,k as x,l as b,F as g,O as h,i as m,h as w,t as T,q as C}from"./index-DyB-GtSf.js";import{_ as S}from"./n-badge.U9JWwHKe.js";import{r as _}from"./uni-app.es.CYr7Wecl.js";import{b as z}from"./system.Bdz65IDa.js";import{m as I}from"./props.CkprGx8I.js";import{_ as k}from"./_plugin-vue_export-helper.BCo6x5W8.js";const j=k({__name:"n-tabs-h",props:I([["items",[]],["value",0],["last",0],"textLabel",["offset",0],["swiperWidth","750rpx"],["isTap",!0],["justify","start"],["scrollSize","750rpx"],["textSize","base"],["activeTextSize","base"],["bgType","inverse"],["textType","text"],["activeTextType","primary"],["height","80rpx"],["width","120rpx"],["left","0"],["right","0"],["space","0px"],"border",["badgeConfig",{}],["hasIndicator",!0],["indicatorType","primary"],["indicatorWidth","80rpx"],["indicatorHeight","5rpx"],["indicatorRadius","4rpx"],["absIndicator",!0],"boxStyle","tabsStyle","textStyle","activeTextStyle","itemStyle","activeItemStyle","indicatorStyle",["updateTime",0],["delay",-1],["updateDelay",-1],["hoverTop",!1],"boxClass","tabsClass","textClass","activeTextClass","itemClass","activeItemClass","indicatorClass"]),emits:["update:value","change"],setup(I,{emit:k}){const j=I,L=k,$=e(0),W=e(0),D=e({}),M=e(0),q=e(null),H=e(null);let K=null;const{proxy:R}=c();const F=t((()=>{let e=`border-radius:${j.indicatorRadius};`;return e+=`height:${j.indicatorHeight};`,e+=`width:${$.value}px;`,e+=`left:${W.value}px;`,e+j.indicatorStyle})),G=t((()=>z(j.space))),J=t((()=>z(j.scrollSize))),N=t((()=>z(j.width))),O=t((()=>z(j.height))),P=t((()=>{if(parseInt(j.indicatorWidth)>0)return!0;return parseInt(j.width)>0})),A=t((()=>{if(parseInt(j.indicatorWidth)>0)return j.indicatorWidth;return parseInt(j.width)>0?j.width:"0"})),B=t((()=>z(A.value))),E=t((()=>"width:"+J.value+"px;"+j.boxStyle)),Q=t((()=>{let e="";return"start"!=j.justify&&(e+="width:"+J.value+"px;"),e+j.tabsStyle})),U=t((()=>{let e=`height:${O.value}px;`;return e+=parseInt(j.width)>0?`width:${N.value}px;margin-right:${G.value}px;`:`margin-right:${G.value}px;`,e+j.itemStyle})),V=t((()=>z(j.swiperWidth)));async function X(e,t=!1){let a=0,s=0,l=0,i=0,n=0;const r=D.value.scroll;if(r)n=r.left;else try{n=(await Z(-100)).left,D.value.scroll={left:n}}catch(y){}const o=D.value["item"+e];if(o)s=o.left,a=o.width,l=o.ind,i=o.indLeft;else try{const t=await Z(e);s=t.left-n,a=t.width,l=P.value?B.value:a,i=s+.5*(a-l),D.value["item"+e]={width:a,left:s,ind:l,indLeft:i}}catch(y){}const d=s+a+G.value;$.value=l,W.value=i;const c=J.value,u=d-(a/2+G.value)-c/2;u>0?M.value=u:0===M.value?M.value=.1:M.value=0}async function Y(){let e=0;try{e=(await Z(-100)).left,D.value.scroll={left:e}}catch(t){}for(const a in j.items)try{const t=await Z(a);let s=t.width;P.value&&(s=B.value),D.value["item"+a]={width:t.width,left:t.left-e,ind:s,indLeft:t.left-e+.5*(t.width-s)}}catch(t){}}function Z(e){return new Promise(((t,a)=>{let s="#item"+e;-100===e&&(s="#nscroll");l().in(R).select(s).fields({size:!0,rect:!0},(e=>{e?t(e):a({})})).exec()}))}return a((async()=>{j.delay>=0?setTimeout((async()=>{await Y(),X(j.value,!0)}),j.delay):(await Y(),X(j.value,!0))})),s((()=>j.value),(e=>{K&&clearTimeout(K),K=setTimeout((()=>{X(e),K=null}),0)})),s((()=>j.items),(()=>{D.value={},h((async()=>{j.updateDelay>=0?setTimeout((async()=>{await Y(),X(j.value,!0)}),j.updateDelay):(await Y(),X(j.value,!0))}))})),s((()=>j.offset),(e=>{!async function(e){const t=j.last;let a=t;if(e>-1&&e<1)return;e>0?a+=1:e<0&&(a-=1);const s=Math.abs(V.value/e);if(a>=j.items.length||a<0||t===a)return;const l=D.value["item"+t],i=D.value["item"+a];W.value=l.indLeft+(i.indLeft-l.indLeft)/s,$.value=l.ind+(i.ind-l.ind)/s}(e)})),s((()=>j.updateTime),(async()=>{D.value={},await Y(),X(j.value,!0)})),(e,t)=>{const a=m,s=C,l=_(i("n-badge"),S),c=u;return y(),n(c,{ref_key:"nscroll",ref:H,id:"nscroll","scroll-x":!0,"scroll-left":M.value,"scroll-with-animation":!0,"show-scrollbar":!1,class:o(["n-bg-"+e.bgType,"n-border-"+e.border,"n-flex-row","n-tabs-scroll",e.boxClass]),style:d(E.value)},{default:r((()=>[f(a,{class:"n-flex-column n-position-relative"},{default:r((()=>[e.hasIndicator&&!e.hoverTop?(y(),n(a,{key:0,ref_key:"nunderline",ref:q,class:o([e.absIndicator&&"n-tab-item-underline","n-bg-"+e.indicatorType,e.indicatorClass,e.isTap?"n-tab-item-animation":""]),style:d(F.value)},{default:r((()=>[p(e.$slots,"indicator",{},void 0,!0)])),_:3},8,["class","style"])):v("",!0),f(a,{class:o(["n-flex-row","n-justify-"+e.justify,"n-wrap-nowrap",e.tabsClass]),style:d(Q.value)},{default:r((()=>[f(a,{class:"n-shrink-0",style:d({width:e.left})},null,8,["style"]),(y(!0),x(g,null,b(e.items,((t,i)=>(y(),n(a,{key:i,ref_for:!0,ref:e=>{},id:"item"+i,class:o(["n-flex-column","n-justify-center","n-align-center","n-position-relative",e.itemClass,i===e.value?e.activeItemClass:""]),style:d(U.value+(i===e.value?e.activeItemStyle:"")+(i===e.items.length-1?"margin-right:0;":"")),onClick:e=>function(e){L("change",e)}(i)},{default:r((()=>[f(s,{class:o(["n-lines-nowrap","n-color-"+(i===e.value?e.activeTextType:e.textType),"n-size-"+(i===e.value?e.activeTextSize:e.textSize),e.textClass,i===e.value?e.activeTextClass:""]),style:d(e.textStyle+(i===e.value?e.activeTextStyle:""))},{default:r((()=>[w(T(e.textLabel?t[e.textLabel]:t),1)])),_:2},1032,["class","style"]),t.badge?(y(),n(l,{key:0,size:t.badge.size||e.badgeConfig.size||"12rpx",bgType:t.badge.bgType||e.badgeConfig.bgType||"error",text:t.badge.text||"",border:t.badge.border||e.badgeConfig.border||"none",textType:t.badge.textType||e.badgeConfig.textType||"inverse",textSize:t.badge.textSize||e.badgeConfig.textSize||"ss",textStyle:t.badge.textStyle||e.badgeConfig.textStyle||"",boxStyle:t.badge.boxStyle||e.badgeConfig.boxStyle||"",textClass:t.badge.textClass||e.badgeConfig.textClass||"",boxClass:t.badge.boxClass||e.badgeConfig.boxClass||""},null,8,["size","bgType","text","border","textType","textSize","textStyle","boxStyle","textClass","boxClass"])):v("",!0)])),_:2},1032,["id","class","style","onClick"])))),128)),f(a,{class:"n-shrink-0",style:d({width:e.right})},null,8,["style"])])),_:1},8,["class","style"]),e.hasIndicator&&e.hoverTop?(y(),n(a,{key:1,ref_key:"nunderline",ref:q,class:o([e.absIndicator&&"n-tab-item-underline","n-bg-"+e.indicatorType,e.indicatorClass,e.isTap?"n-tab-item-animation":""]),style:d(F.value)},{default:r((()=>[p(e.$slots,"indicator",{},void 0,!0)])),_:3},8,["class","style"])):v("",!0)])),_:3})])),_:3},8,["scroll-left","class","style"])}}},[["__scopeId","data-v-6f0df1de"]]);export{j as _};

import{E as e,r as o,c as r,J as s,b as l,k as t,d as n,w as a,n as i,m as h,j as d,f as g,F as c,i as u,G as f,o as p,e as T,N as x}from"./index-DyB-GtSf.js";import{u as b,a as S,_ as m,b as y,c as w}from"./usePager.Bx7XEHLh.js";import{r as M}from"./uni-app.es.CYr7Wecl.js";import{g as R}from"./system.Bdz65IDa.js";import{m as C}from"./props.CkprGx8I.js";const v={__name:"n-list",props:C([["scrollable",!0],["enableBackToTop",!1],["useLoading",!1],["loadMoreOffset",60],["pagingEnabled",!1],["bounce",!0],["renderReverse",!1],["autoUpdate",!1],["down",{use:!0,offset:e(140),inRate:.8,outRate:.2}],["up",{use:!0,offset:80}],["hasScroll",!0],["showScrollbar",!0],["bgType","page"],["position","static"],["top","0"],["bottom","0"],"boxStyle",["height","window-!status-!nav"],"reverse",["loadMainText","继续加载更多"],["loadingText","正在加载"],["noMoreText","没有更多啦"],["showNoMore",!0],["loadingSrc","/static/ui/loading-small.gif"],"loadingStyle","loadingImgStyle","loadingTextStyle",["refreshMainText","下拉即可刷新..."],["pullingText","释放即可刷新..."],["refreshingText","正在努力加载..."],"refreshStyle","refreshTextStyle","boxClass","loadingClass","loadingImgClass","loadingTextClass","refreshClass","refreshTextClass",["upperThreshold",50],["lowerThreshold",50],["scrollWithAnimation",!0],["refresherEnabled",!1],["refresherThreshold",45],["refresherDefaultStyle","black"],["refresherBackground","#FFFFFF"],["refresherTriggered",!1],["enableFlex",!1],["scrollAnchoring",!1],["isParent",!1],["isChild",!1],["headerHeight",0],["listId",""],["parentId",""]]),emits:["inited","scroll","down","up","upper","lower","pulling","refresh","restore","abort","toggle","move"],setup(C,{expose:v,emit:k}){const L=C,E=k,j=o(null),F=o(null),N=o(null),{nCurrentView:_,nScrollTop:I,nScrollTo:U,nScrollToTop:B,nScrollToBottom:A}=b(),{pagerState:H,nInitContentList:O,nScroll:$,nLoad:D,nReload:P,nRefresh:W,nEndSuccess:Y,nEndError:q,nTouchstartEvent:G,nTouchmoveEvent:J,nTouchendEvent:K}=S(L,E,j,F,N,_,I),{onScrollToUpper:V,onScrollToLower:z,onRefresherPulling:Q,onRefresherRefresh:X,onRefresherRestore:Z,onRefresherAbort:ee}=w(E);v({nLoad:D,nReload:P,nRefresh:W,nEndSuccess:Y,nEndError:q,nScrollTo:U,nScrollToTop:B,nScrollToBottom:A});const oe=r((()=>{let e="";return"-1"!=L.height&&(e+="height:"+R(L.height)+"px;"),"-1"!=L.top&&(e+="top:"+R(L.top)+"px;"),"-1"!=L.bottom&&(e+="bottom:"+R(L.bottom)+"px;"),e+L.boxStyle})),re=r((()=>{let e="";return e+=H.isDownReset?"transition-property: transform; transition-duration: 300ms;":"",e+=H.downHeight>0?`transform: translateY(${H.downHeight}px);`:"transform: translateY(0px);",e})),se=r((()=>H.downHeight>=(H.down.offset||80))),le=r((()=>H.downHeight/(H.down.offset||80)));return H.down=Object.assign({use:!0,offset:e(140),inRate:.8,outRate:.2},L.down||{use:!1}),H.up=Object.assign({use:!0,offset:80},L.up||{use:!1}),H.scrollable=L.scrollable,setTimeout((()=>{E("inited")}),0),L.autoUpdate&&setTimeout((()=>{O()}),10),s((()=>L.down),(o=>{H.down=Object.assign({use:!0,offset:e(140),inRate:.8,outRate:.2},o||{use:!1})})),s((()=>L.up),(e=>{H.up=Object.assign({use:!0,offset:80},e||{use:!1})})),s((()=>L.scrollable),(e=>{H.scrollable=e})),s((()=>H.scrollable),(e=>{E("toggle",e)})),(e,o)=>{const r=M(l("n-refresher"),m),s=u,b=M(l("n-loader"),y),S=f;return p(),t(c,null,[e.hasScroll?(p(),n(S,{key:0,class:i(["n-bg-"+e.bgType,e.boxClass]),style:h(e.reverse+oe.value),"upper-threshold":e.upperThreshold,"lower-threshold":e.lowerThreshold,"scroll-into-view":d(_),"scroll-top":d(I),"scroll-with-animation":e.scrollWithAnimation,"scroll-y":d(H).scrollable,"show-scrollbar":e.showScrollbar,"enable-back-to-top":e.enableBackToTop,"refresher-enabled":e.refresherEnabled,"refresher-threshold":e.refresherThreshold,"refresher-default-style":e.refresherDefaultStyle,"refresher-background":e.refresherBackground,"refresher-triggered":e.refresherTriggered,"enable-flex":e.enableFlex,"scroll-anchoring":e.scrollAnchoring,onScroll:d($),onScrolltoupper:d(V),onScrolltolower:d(z),onRefresherpulling:d(Q),onRefresherrefresh:d(X),onRefresherrestore:d(Z),onRefresherabort:d(ee)},{default:a((()=>[T(s,{style:h(re.value),class:"n-position-relative",onTouchstart:d(G),onTouchmove:d(J),onTouchend:d(K),onTouchcancel:d(K)},{default:a((()=>[d(H).down.use?(p(),n(s,{key:0,class:"n-position-absolute n-left-0 n-translate-y100_"},{default:a((()=>[T(r,{refreshing:d(H).isDownLoading,couldUnLash:se.value,rate:le.value,mainText:e.refreshMainText,pullingText:e.pullingText,refreshingText:e.refreshingText,boxStyle:e.reverse+e.refreshStyle,textStyle:e.refreshTextStyle,boxClass:e.refreshClass,textClass:e.refreshTextClass},null,8,["refreshing","couldUnLash","rate","mainText","pullingText","refreshingText","boxStyle","textStyle","boxClass","textClass"])])),_:1})):g("",!0),T(s,{id:"nlisttop"}),x(e.$slots,"default"),x(e.$slots,"token"),T(s,{id:"nlistbottom"}),d(H).up.use?(p(),n(b,{key:1,isLoading:d(H).isUpLoading,hasMore:d(H).hasMore,showNoMore:e.showNoMore,mainText:e.loadMainText,loadingText:e.loadingText,noMoreText:e.noMoreText,loadingSrc:e.loadingSrc,boxStyle:e.reverse+e.loadingStyle,imgStyle:e.loadingImgStyle,textStyle:e.loadingTextStyle,boxClass:e.loadingClass,imgClass:e.loadingImgClass,textClass:e.loadingTextClass},null,8,["isLoading","hasMore","showNoMore","mainText","loadingText","noMoreText","loadingSrc","boxStyle","imgStyle","textStyle","boxClass","imgClass","textClass"])):g("",!0)])),_:3},8,["style","onTouchstart","onTouchmove","onTouchend","onTouchcancel"])])),_:3},8,["class","style","upper-threshold","lower-threshold","scroll-into-view","scroll-top","scroll-with-animation","scroll-y","show-scrollbar","enable-back-to-top","refresher-enabled","refresher-threshold","refresher-default-style","refresher-background","refresher-triggered","enable-flex","scroll-anchoring","onScroll","onScrolltoupper","onScrolltolower","onRefresherpulling","onRefresherrefresh","onRefresherrestore","onRefresherabort"])):g("",!0),e.hasScroll?g("",!0):(p(),n(s,{key:1},{default:a((()=>[T(s,{id:"nlisttop"}),x(e.$slots,"default"),x(e.$slots,"token"),T(s,{id:"nlistbottom"}),d(H).up.use?(p(),n(b,{key:0,isLoading:d(H).isUpLoading,hasMore:d(H).hasMore,showNoMore:e.showNoMore,mainText:e.loadMainText,loadingText:e.loadingText,noMoreText:e.noMoreText,loadingSrc:e.loadingSrc,boxStyle:e.reverse+e.loadingStyle,imgStyle:e.loadingImgStyle,textStyle:e.loadingTextStyle},null,8,["isLoading","hasMore","showNoMore","mainText","loadingText","noMoreText","loadingSrc","boxStyle","imgStyle","textStyle"])):g("",!0)])),_:3}))],64)}}};export{v as _};

import{r as e,E as t,c as a,au as r,a2 as n,av as s,b as l,o as i,d as o,w as c,e as p,m as d,aw as u,ax as m,i as g,ay as h,f as x,n as f,h as y,t as v,p as w,q as _,I as b,K as S,az as k,k as z,F as C,l as j,j as I,G as T}from"./index-DyB-GtSf.js";import{_ as F}from"./n-icon.C34IfF9H.js";import{r as L}from"./uni-app.es.CYr7Wecl.js";import{_ as B}from"./n-button.C0Lbq8AA.js";import{_ as P}from"./_plugin-vue_export-helper.BCo6x5W8.js";import{_ as D}from"./n-popup.DWLeKhpE.js";import{a as E}from"./element.B9OwrRfy.js";import{c as K}from"./imgs.wUGTdslH.js";const V=["😀","😬","😁","😂","🤣","🥳","😃","😄","😅","😆","😇","😉","😊","🙂","🙃","☺️","😋","😌","😍","🥰","😘","😗","😙","😚","😜","🤪","🤨","🧐","😝","😛","🤑","🤓","😎","🤩","🤡","🤠","🤗","😏","😶","😐","😑","😒","🙄","🤔","🤥","🤭","🤫","🤬","🤯","😳","😞","😟","😠","😡","😔","😕","🙁","😣","😖","😫","😩","🥺","😤","😮","😱","😨","😰","😯","😦","😧","😢","😥","🤤","😪","😓","🥵","🥶","😭","😵","😲","🤐","🤢","🤧","🤮","😷","🤒","🤕","🥴","😴","💤","💩","😈","👿","👹","👺","💀","👻","👽","💯","🤖","😺","😸","😹","😻","😼","😽","🙀","😿","😾","🤲","🙌","👏","👋","🤙","👍","👎","👊","✊","🤛","🤜","👌","✋","🤚","👐","💪","🙏","🦶","🦵","🤝","☝","👆","👇","👈","👉","🖕","🖐","🤟","🤘","🤞","🖖","🤳","💅","👄","🦷","👅","👂","👃","💁","🙅","🙆","🙋","🙎","🙍","💇","💆","💑"],O=P({__name:"inputToolbar",emits:["image","record","emotion","plus","kb","confirm"],setup(x,{expose:f,emit:y}){const v=y,w=e(t(60)),_=e(t(60)),b=e(""),S=a((()=>!!b.value&&b.value.trim().length>0));function k(){u(),m({count:1,success:e=>{v("image",e.tempFilePaths[0])},fail:e=>{}})}function z(){u(),v("record")}function C(){u(),v("emotion")}function j(){u(),v("plus")}function I(){b.value&&0!==b.value.trim().length&&v("confirm",b.value.trim())}function T(e){if(console.log(e),e.detail.lineCount<=4){let a=e.detail.height;a<=t(60)&&(a=t(60)),e.detail.lineCount<=1&&(_.value=a),w.value=a}else w.value=4*e.detail.height/e.detail.lineCount}function P(e){console.log(e),v("kb",e.detail)}return f({clear:function(){b.value=""},setValue:function(e){b.value=e}}),r("chatEmj",(e=>{b.value=b.value+e})),r("chatDelEmj",(()=>{if(!b.value)return;if(1===b.value.length)return void(b.value="");const e=b.value.substr(b.value.length-2,b.value.length);V.includes(e)||b.value.substr(b.value.length-2,b.value.length).search(/(\ud83c[\udf00-\udfff])|(\ud83d[\udc00-\ude4f])|(\ud83d[\ude80-\udeff])/i)>=0?b.value=b.value.substr(0,b.value.length-2):b.value=b.value.substr(0,b.value.length-1)})),n((()=>{s("chatEmj"),s("chatDelEmj")})),(e,t)=>{const a=L(l("n-icon"),F),r=g,n=h,s=L(l("n-button"),B);return i(),o(r,{class:"itl n-flex-row n-wrap-nowrap n-align-end"},{default:c((()=>[p(a,{name:"camera",type:"second",size:"ll",boxStyle:"height:60rpx;",iconStyle:"font-size:42rpx;",onIconClicked:k}),p(r,{style:{width:"30rpx"}}),p(a,{name:"mic-solid",type:"second",size:"ll",boxStyle:"height:60rpx;",iconStyle:"font-size:42rpx;",onIconClicked:z}),p(r,{style:{width:"30rpx"}}),p(n,{modelValue:b.value,"onUpdate:modelValue":t[0]||(t[0]=e=>b.value=e),class:"itl-area n-flex-1",placeholder:"总要说点什么吧",style:d("height:"+w.value+"px;"),maxlength:1e3,"adjust-position":!1,"confirm-type":"send",onLinechange:T,onKeyboardheightchange:P,onConfirm:I},null,8,["modelValue","style"]),p(r,{style:{width:"30rpx"}}),p(a,{name:"smile",type:"second",size:"ll",boxStyle:"height:60rpx;",iconStyle:"font-size:42rpx;",onIconClicked:C}),p(r,{style:{width:"30rpx"}}),S.value?(i(),o(s,{key:0,text:"发送",textType:"inverse",textSize:"s",bgType:"primary",border:"none",radius:"base",boxStyle:"width:90rpx;height:60rpx;",onButtonClicked:I})):(i(),o(a,{key:1,name:"add-circle",type:"second",size:"ll",boxStyle:"height:60rpx;",iconStyle:"font-size:42rpx;",onIconClicked:j}))])),_:1})}}},[["__scopeId","data-v-dc52808f"]]),q=P({__name:"msgTextCell",props:{avatar:{type:String,default:""},msg:{type:String,default:""},isLeft:{type:Boolean,default:!0},boxStyle:{type:String,default:""}},emits:["more"],setup(e,{emit:t}){const a=t;function r(e){a("more")}return(t,a)=>{const n=w,s=_,l=g;return i(),o(l,{class:f(["n-flex-row","n-wrap-nowrap",e.isLeft?"mtc-left":"mtc-right"]),style:d(e.boxStyle)},{default:c((()=>[e.isLeft?(i(),o(n,{key:0,src:e.avatar,mode:"aspectFill",style:{width:"60rpx",height:"60rpx","border-radius":"12rpx","margin-right":"8rpx"}},null,8,["src"])):x("",!0),p(s,{class:f(["mtc-text","n-size-s","n-lh-s",e.isLeft?"n-color-text":"n-color-inverse",e.isLeft?"mtc-text-left":"mtc-text-right"]),style:{"border-radius":"8rpx"},onLongpress:r},{default:c((()=>[y(v(e.msg),1)])),_:1},8,["class"]),e.isLeft?x("",!0):(i(),o(n,{key:1,src:e.avatar,mode:"aspectFill",style:{width:"60rpx",height:"60rpx","border-radius":"12rpx","margin-left":"8rpx"}},null,8,["src"]))])),_:1},8,["class","style"])}}},[["__scopeId","data-v-71627961"]]),X=P({__name:"msgImageCell",props:{avatar:{type:String,default:""},src:{type:String,default:""},isLeft:{type:Boolean,default:!0},boxStyle:{type:String,default:""}},setup:e=>(t,a)=>{const r=w,n=g;return i(),o(n,{class:f(["n-flex-row","n-wrap-nowrap",e.isLeft?"mtc-left":"mtc-right"]),style:d(e.boxStyle)},{default:c((()=>[e.isLeft?(i(),o(r,{key:0,src:e.avatar,mode:"aspectFill",style:{width:"60rpx",height:"60rpx","border-radius":"12rpx","margin-right":"8rpx"}},null,8,["src"])):x("",!0),p(r,{src:e.src,mode:"aspectFill",style:{width:"320rpx",height:"320rpx","border-radius":"12rpx"}},null,8,["src"]),e.isLeft?x("",!0):(i(),o(r,{key:1,src:e.avatar,mode:"aspectFill",style:{width:"60rpx",height:"60rpx","border-radius":"12rpx","margin-left":"8rpx"}},null,8,["src"]))])),_:1},8,["class","style"])}},[["__scopeId","data-v-0b1d9397"]]),A=P({__name:"msgVoiceCell",props:{avatar:{type:String,default:""},src:{type:String,default:""},isLeft:{type:Boolean,default:!0},boxStyle:{type:String,default:""},current:{type:String,default:""}},emits:["play"],setup(e,{emit:t}){const a=e,r=t;function n(){r("play",a.src)}return(t,a)=>{const r=w,s=L(l("n-icon"),F),u=_,m=g;return i(),o(m,{class:f(["n-flex-row","n-wrap-nowrap",e.isLeft?"mtc-left":"mtc-right"]),style:d(e.boxStyle)},{default:c((()=>[e.isLeft?(i(),o(r,{key:0,src:e.avatar,mode:"aspectFill",style:{width:"60rpx",height:"60rpx","border-radius":"12rpx","margin-right":"8rpx"}},null,8,["src"])):x("",!0),p(m,{class:"mtc-voice n-flex-row n-align-center n-bg-inverse",bubble:"true",onClick:n},{default:c((()=>[p(s,{name:e.current==e.src?"stop":"play",type:"error",size:"base",onIconClicked:n},null,8,["name"]),p(u,{class:"n-size-ss n-color-second",style:{"font-weight":"700","margin-left":"24rpx"}},{default:c((()=>[y("00:56")])),_:1})])),_:1}),e.isLeft?x("",!0):(i(),o(r,{key:1,src:e.avatar,mode:"aspectFill",style:{width:"60rpx",height:"60rpx","border-radius":"12rpx","margin-left":"8rpx"}},null,8,["src"]))])),_:1},8,["class","style"])}}},[["__scopeId","data-v-95935c63"]]),G={__name:"voiceKeyboard",props:{show:{type:Boolean,default:!1}},emits:["voice","short","cancel"],setup(e,{emit:r}){let n=null,s=null;const d=t(280),u=t(470);let m=!1;const h=r,x=b({second:0,startTime:0,endTime:0,inCancelArea:!1,canceled:!1,startPoint:null}),f=a((()=>x.second<=9?"00:0"+parseInt(x.second):x.second>=60?"01:00":"00:"+parseInt(x.second)));function w(e){console.log(e);const t=E(e);t.sX<=d||t.sX>=u?m=!0:(x.startPoint=t,m=!1,x.canceled=!1,s&&clearInterval(s),x.second=0,s=setInterval((()=>{x.second+=.05,x.second>=59.95&&(s&&clearInterval(s),x.second=0)}),50),x.startTime=Date.now(),n.start({duration:6e4,format:"mp3"}))}function z(e){console.log(e)}function C(e){if(console.log(e),m)return;const t=E(e);if(!x.startPoint)return T(),n.stop(),void I();return t.y-x.startPoint.y<=-20?(T(),n.stop(),void I()):(x.endTime=Date.now(),x.endTime-x.startTime<100?(T(),n.stop(),void h("short")):(n.stop(),s&&clearInterval(s),void(x.second=0)))}function j(e){console.log(e),T(),n.stop(),I()}function I(){h("cancel")}function T(){x.canceled=!0,s&&clearInterval(s),x.second=0,x.startTime=0,x.endTime=0}return S((()=>{!function(){if(n=k(),!n)return;n.onStop((e=>{if(x.canceled)return;const t=e.tempFilePath;h("voice",t)}))}()})),(t,a)=>{const r=_,n=g,s=L(l("n-popup"),D);return i(),o(s,{show:e.show,hasOverlay:!1,height:"276rpx",width:"750rpx",duration:250},{default:c((()=>[p(n,{class:"n-bg-page n-flex-column n-align-center",style:{width:"750rpx",height:"276rpx"},onTouchstart:w,onTouchmove:z,onTouchend:C,onTouchcancel:j},{default:c((()=>[p(r,{class:"n-size-ss n-lh-ss n-color-second",style:{"margin-top":"20rpx"}},{default:c((()=>[y("按住说话，上推取消")])),_:1}),p(n,{class:"n-flex-row n-align-center n-justify-center",style:{"margin-top":"20rpx"}},{default:c((()=>[p(r,{class:"n-color-second",style:{width:"250rpx","text-align":"center","font-size":"50rpx"}},{default:c((()=>[y(v(f.value),1)])),_:1}),p(n,{class:"n-radius-ll n-bg-error n-flex-row n-align-center n-justify-center",style:{"margin-left":"32rpx","margin-right":"32rpx",width:"105rpx",height:"105rpx"}},{default:c((()=>[p(n,{class:"n-bg-inverse",style:{width:"35rpx",height:"35rpx"}})])),_:1}),p(r,{class:"n-color-second",style:{width:"250rpx","text-align":"center","font-size":"50rpx"}},{default:c((()=>[y(v(f.value),1)])),_:1})])),_:1})])),_:1})])),_:1},8,["show"])}}},N={__name:"plusKeyboard",props:{show:{type:Boolean,default:!1},height:{type:Number,default:0}},emits:["collect"],setup(e,{emit:t}){const a=t;function r(){a("collect")}return(t,a)=>{const n=L(l("n-icon"),F),s=g,u=_,m=L(l("n-popup"),D);return i(),o(m,{show:e.show,hasOverlay:!1,height:(e.height||120)+"px",width:"750rpx",duration:250},{default:c((()=>[p(s,{class:"n-bg-page n-flex-row n-wrap-wrap",style:d("width: 750rpx;height:"+(e.height||120)+"px;")},{default:c((()=>[p(s,{class:"n-flex-column n-align-center n-justify-start",style:{"margin-top":"36rpx","margin-left":"62rpx",width:"112rpx"},bubble:"true",onClick:r},{default:c((()=>[p(s,{class:"n-flex-row n-align-center n-justify-center",style:{width:"112rpx",height:"112rpx","background-color":"#FFFFFF","border-radius":"12rpx"}},{default:c((()=>[p(n,{name:"fav-fill",type:"second",size:"12"})])),_:1}),p(u,{class:"n-size-s n-lh-s n-color-second",style:{"font-weight":"700","margin-top":"6rpx"}},{default:c((()=>[y("收藏")])),_:1})])),_:1})])),_:1},8,["style"])])),_:1},8,["show","height"])}}},R={__name:"emotionKeyboard",props:{show:{type:Boolean,default:!1}},emits:["delete","select"],setup(e,{emit:t}){const a=t;function r(){a("delete")}return(t,n)=>{const s=_,d=g,u=T,m=L(l("n-button"),B),h=L(l("n-popup"),D);return i(),o(h,{show:e.show,hasOverlay:!1,height:"160px",width:"750rpx",duration:250},{default:c((()=>[p(u,{"scroll-y":!0,class:"n-bg-page",style:{width:"750rpx",height:"160px"}},{default:c((()=>[p(d,{class:"n-flex-row n-wrap-wrap"},{default:c((()=>[(i(!0),z(C,null,j(I(V),((e,t)=>(i(),o(s,{key:t,style:{width:"60rpx","text-align":"center","font-size":"30rpx","line-height":"42rpx","margin-left":"30rpx","margin-top":"30rpx"},onClick:t=>{a("select",e)}},{default:c((()=>[y(v(e),1)])),_:2},1032,["onClick"])))),128))])),_:1}),p(d,{style:{width:"750rpx",height:"90rpx"}})])),_:1}),p(m,{bgType:"inverse",radius:"s",icon:"close",boxStyle:"position:absolute;right:0;bottom:30rpx;width:100rpx;height:60rpx;",onButtonClicked:r})])),_:1},8,["show"])}}},U=[{id:1,avatar:K.avatar.girl_nice,type:"text",msg:"你好，在吗"},{id:2,avatar:K.avatar.caiman,type:"text",msg:"什么事"},{id:1,avatar:K.avatar.girl_nice,type:"image",msg:K.avatar.caiman},{id:1,avatar:K.avatar.girl_nice,type:"text",msg:"我美吗"},{id:2,avatar:K.avatar.caiman,type:"text",msg:"?"},{id:1,avatar:K.avatar.girl_nice,type:"text",msg:"你喜欢我吗"},{id:2,avatar:K.avatar.caiman,type:"text",msg:"?"},{id:1,avatar:K.avatar.girl_nice,type:"text",msg:"是这样的，我外公家是茶农，自己家的茶叶。今年外公身体不好，打算把以前收藏的茶叶全部出手"},{id:2,avatar:K.avatar.caiman,type:"text",msg:"滚"}];K.avatar.girl_nice,K.avatar.caiman,K.avatar.girl_nice,K.cover.house_white,K.avatar.girl_nice,K.avatar.caiman;const H=[{id:1,avatar:K.avatar.girl_nice,type:"text",msg:"你好，在吗"},{id:2,avatar:K.avatar.caiman,type:"text",msg:"什么事"},{id:1,avatar:K.avatar.girl_nice,type:"image",msg:K.avatar.caiman},{id:1,avatar:K.avatar.girl_nice,type:"text",msg:"我美吗"},{id:2,avatar:K.avatar.caiman,type:"text",msg:"?"},{id:1,avatar:K.avatar.girl_nice,type:"text",msg:"你喜欢我吗"},{id:2,avatar:K.avatar.caiman,type:"text",msg:"?"},{id:1,avatar:K.avatar.girl_nice,type:"text",msg:"是这样的，我外公家是茶农，自己家的茶叶。今年外公身体不好，打算把以前收藏的茶叶全部出手"},{id:2,avatar:K.avatar.caiman,type:"text",msg:"滚"},{id:1,avatar:K.avatar.girl_nice,type:"text",msg:"你怎么能这样了？你一个大男人，还有没有点同情心。花几百块钱买一些茶叶会死啊"},{id:2,avatar:K.avatar.caiman,type:"text",msg:"滚"},{id:1,avatar:K.avatar.girl_nice,type:"text",msg:"一看就知道你是loser。茶叶都买不起，脾气还不好。估计长得也丑吧"},{id:2,avatar:K.avatar.caiman,type:"text",msg:"滚"}];export{G as _,N as a,R as b,U as c,X as d,A as e,H as f,O as i,q as m};

import{at as t,I as e,c as i,b as s,d as o,w as a,i as n,o as r,e as l,j as p,k as c,l as h,F as m,m as u,E as g,v as f,ad as b,O as v,f as y}from"./index-DyB-GtSf.js";import{_ as d}from"./n-navbar.DgJOiXYI.js";import{o as x,d as V,r as j}from"./uni-app.es.CYr7Wecl.js";import{_ as H}from"./n-list-cell.CFZ1yxA_.js";import{_ as S}from"./n-list.qlhvrMMX.js";import{_}from"./n-height.iPg7YRxT.js";import{i as w,_ as k,a as L,b as P,c as E,m as T,d as A,e as I}from"./data.BtYriC70.js";import"./n-icon.C34IfF9H.js";import"./n-popup.DWLeKhpE.js";import{c as M}from"./imgs.wUGTdslH.js";import{u as C}from"./useNav.y5ABEmWP.js";import{c as D,d as R}from"./system.Bdz65IDa.js";import{u as z}from"./element.B9OwrRfy.js";import"./n-badge.U9JWwHKe.js";import"./props.CkprGx8I.js";import"./usePager.Bx7XEHLh.js";import"./_plugin-vue_export-helper.BCo6x5W8.js";import"./n-button.C0Lbq8AA.js";import"./n-loading-indicator.BodNpqVl.js";const K={__name:"normal",props:{type:{type:String,default:"1"}},setup(K){const{leftIcons:N,navLeftAction:O}=C(),q=t(),B=z(),F=[{icon:"add",text:"好友",iconType:"inverse",iconSize:"ss",textType:"inverse",textSize:"ss",textStyle:"margin-left:6rpx;",bgType:"error",style:"border-radius:60rpx;width:125rpx;height:25px;justify-content:center;"},{icon:"elipsis",style:"margin-left:36rpx;"}],Q=e({hasMorePage:!1,items:[],kbH:0,kbHeight:0,otherHeight:0,voiceVisible:!1,plusVisible:!1,emotionVisible:!1,moreVisible:!1,playingSrc:"",xh:0,platform:"",cp:1}),W=i((()=>Q.kbHeight||Q.otherHeight||0)),G=K;function J(t){}function U(t){Q.items.push({id:2,avatar:M.avatar.caiman,type:"image",msg:t}),Q.items.push({id:1,avatar:M.avatar.girl_nice,type:"image",msg:t}),ct()}function X(){Q.voiceVisible=!Q.voiceVisible,Q.plusVisible=!1,Q.emotionVisible=!1,Q.voiceVisible?Q.otherHeight=g(276)-Q.xh:Q.otherHeight=0}function Y(){Q.voiceVisible=!1,Q.otherHeight=0}function Z(){Q.voiceVisible=!1,Q.otherHeight=0}function $(t){console.log(t),Q.voiceVisible=!1,Q.otherHeight=0,Q.items.push({id:2,avatar:M.avatar.caiman,type:"voice",msg:t}),Q.items.push({id:1,avatar:M.avatar.girl_nice,type:"voice",msg:t}),ct()}function tt(t){t==Q.playingSrc?q.stop():(q.stop(),q.src=t,q.play())}function et(){Q.plusVisible=!Q.plusVisible,Q.plusVisible?Q.otherHeight=(Q.kbH||120)-Q.xh:Q.otherHeight=0,Q.emotionVisible=!1,Q.voiceVisible=!1}function it(){f({url:"/pages/chat/collected"})}function st(){Q.emotionVisible=!Q.emotionVisible,Q.emotionVisible?Q.otherHeight=160-Q.xh:Q.otherHeight=0,Q.plusVisible=!1,Q.voiceVisible=!1}function ot(t){b("chatEmj",t)}function at(){b("chatDelEmj")}function nt(t){console.log(t),Q.items.push({id:2,avatar:M.avatar.caiman,type:"text",msg:t}),Q.items.push({id:1,avatar:M.avatar.girl_nice,type:"text",msg:t}),ct(),B.inputtoolbar.clear()}function rt(t){Q.kbHeight=t.height,t.height>0&&(Q.kbH=t.height,Q.otherHeight=0,Q.voiceVisible=!1,Q.emotionVisible=!1,Q.plusVisible=!1),ct()}function lt(){Q.items=E,ct()}function pt(){Q.moreVisible=!0}function ct(){let t=B.list.nScrollToBottom;v((()=>{t()}))}return x((()=>{Q.platform=D(),Q.hasMorePage="2"==G.type,Q.xh=R(),q.onEnded((()=>{Q.playingSrc=""})),q.onPause((()=>{Q.playingSrc=""})),q.onStop((()=>{Q.playingSrc=""})),q.onPlay((()=>{Q.playingSrc=q.src})),q.onError((()=>{Q.playingSrc=""}))})),V((()=>{q.offEnded(),q.offPause(),q.offStop(),q.offPlay(),q.offError()})),(t,e)=>{const i=j(s("n-navbar"),d),g=n,f=j(s("n-list-cell"),H),b=j(s("n-list"),S),v=j(s("n-height"),_);return r(),o(g,null,{default:a((()=>[l(i,{lefts:p(N),title:"本人张翠花",rights:F,leftStyle:"width:90rpx;",centerStyle:"width:300rpx;justify-content:flex-start !important;",rightStyle:"width:360rpx;",onRightAction:J,onLeftAction:p(O)},null,8,["lefts","onLeftAction"]),l(b,{ref:t=>p(B).set(t,"list"),down:null,up:null,height:"window-!status-!nav-!x",onInited:lt},{default:a((()=>[l(f,null,{default:a((()=>[l(g,{style:{height:"26rpx"}})])),_:1}),(r(!0),c(m,null,h(Q.items,((e,i)=>(r(),o(f,{key:i},{default:a((()=>["text"==e.type?(r(),o(T,{key:0,isLeft:1===e.id,avatar:e.avatar,msg:e.msg,onMore:pt},null,8,["isLeft","avatar","msg"])):y("",!0),"image"==e.type?(r(),o(A,{key:1,isLeft:1===e.id,avatar:e.avatar,src:e.msg},null,8,["isLeft","avatar","src"])):y("",!0),"voice"==e.type?(r(),o(I,{key:2,isLeft:1===e.id,avatar:e.avatar,src:e.msg,current:t.playingSrc,onPlay:tt},null,8,["isLeft","avatar","src","current"])):y("",!0),l(g,{style:{height:"76rpx"}})])),_:2},1024)))),128))])),_:1},512),l(w,{ref:t=>p(B).set(t,"inputtoolbar"),onKb:rt,onImage:U,onPlus:et,onEmotion:st,onRecord:X,onConfirm:nt},null,512),l(g,{style:u({height:W.value+"px"})},null,8,["style"]),l(v,{height:"x",bgType:"inverse"}),l(k,{show:Q.voiceVisible,onShort:Z,onVoice:$,onCancel:Y},null,8,["show"]),l(L,{show:Q.plusVisible,height:Q.kbH,onCollect:it},null,8,["show","height"]),l(P,{show:Q.emotionVisible,onSelect:ot,onDelete:at},null,8,["show"])])),_:1})}}};export{K as default};

import{u as e,s as a,c as t,r as l,g as r,a as i,b as n,d as s,w as o,i as p,o as c,e as u,f as d,n as h,h as v,t as x,j as f,k as g,l as m,F as y,m as _,p as w,q as k,v as b}from"./index-DyB-GtSf.js";import{_ as j}from"./n-search.BYDKe9n_.js";import{o as T,r as S}from"./uni-app.es.CYr7Wecl.js";import{_ as C}from"./n-icon.C34IfF9H.js";import{_ as z}from"./n-navbar.DgJOiXYI.js";import{_ as W}from"./n-skeleton.BR3EGEkZ.js";import{_ as H}from"./n-tabs-h.M46Ayuc-.js";import{_ as F}from"./n-divider.5GELhiLD.js";import{_ as E,a as I}from"./n-waterfall.D5mLKZ7h.js";import{_ as G}from"./n-popup.DWLeKhpE.js";import{_ as P}from"./n-toast.BftX-TBc.js";import{_ as R,c as A,t as M}from"./topPop.Bu0iWAGb.js";import{g as B,q}from"./apis.CyB1vCjv.js";import{a as D}from"./animate.QYSEQYB_.js";/* empty css                                                                       */import{_ as L}from"./_plugin-vue_export-helper.BCo6x5W8.js";import{g as O,a as U}from"./goodsClubCell.Bc3gcORI.js";import"./n-title.UwO7pAt4.js";import"./n-tag.gyNX6JFe.js";import"./n-list.qlhvrMMX.js";import"./n-popup-always.IOuLEdmu.js";import{$ as J}from"./index.BbqTuRg8.js";import"./props.CkprGx8I.js";import"./n-badge.U9JWwHKe.js";import"./system.Bdz65IDa.js";import"./usePager.Bx7XEHLh.js";import"./element.B9OwrRfy.js";import"./n-button.C0Lbq8AA.js";import"./n-loading-indicator.BodNpqVl.js";import"./imgs.wUGTdslH.js";const Y=L({__name:"index",setup(L){const Y=e(),{language:K}=a(Y);t((()=>J("desc",K.value)));const N=l([]),Q=l(null),Z=l(null),$=l(null),V=l([]),X=l([{id:1,zh:"曼谷",en:"Bangkok"},{id:2,zh:"芭提雅",en:"Pattaya"},{id:3,zh:"清迈",en:"ChiangMai"}]),ee=l([{id:1,zh:"最新",en:"Latest"},{id:2,zh:"热门",en:"Popular"}]),ae=l(""),te=l(""),le=l(-1),re=l(-1),ie=l(0),ne=l(-1),se=l(-1),oe=l(0),pe=l(!1),ce=[{link:"https://t.me/hottiefans",src:"../../static/telegram.png"},{link:"https://lin.ee/TO6x9Zx",src:"../../static/line.png"},{link:"https://wa.me/message/I3J36BHF5FI7I1",src:"../../static/whatsapp.png"}],ue=l(),de=l(!1),he=l(!1),ve=l(!1),xe=l(!1),fe=l(""),ge=l(r("lang")||"en"),me={},ye=t((()=>X.value.map((e=>e[ge.value])))),_e=t((()=>ee.value.map((e=>e[ge.value]))));function we(e,a){const t=me[e];return new Promise(((e,l)=>{D(t,{styles:{opacity:a?0:1,transform:a?"translateY(12%)":"translateY(0)"},duration:300,timingFunction:"ease-in-out"},fe).then((a=>{e({})})).catch((e=>{l({})}))}))}function ke(e,a){e(a,!0).then((()=>{e(a,!1).then((()=>{})).catch((()=>{}))})).catch((e=>{console.log(e)}))}function be(){ae.value="",le.value=-1,de.value=!1,ne.value=-1,ke(we,"slideFade"),Z.value.nEndSuccess(!0),Z.value.nRefresh()}function je(){te.value="",re.value=-1,de.value=!1,se.value=-1,ke(we,"slideFade"),Z.value.nEndSuccess(!0),Z.value.nRefresh()}function Te(e){ne.value=Q.value[e].id,de.value=!1,le.value=e,ae.value="2",ke(we,"slideFade"),Z.value.nEndSuccess(!0),Z.value.nRefresh()}function Se(e){se.value=e,re.value=e,te.value="2",de.value=!1,ke(we,"slideFade"),Z.value.nEndSuccess(!0),Z.value.nRefresh()}function Ce(e){ie.value=e,oe.value=e,de.value=!1,ke(we,"slideFade"),Z.value.nEndSuccess(!0),Z.value.nRefresh()}function ze(){pe.value=!1}T((async()=>{ge.value=r("lang"),"th"==ge.value&&i({url:"/pages/index/empty"}),Ge(),he.value=!0}));const We=()=>{pe.value=!0};function He(){ve.value=!0}function Fe(){ve.value=!1}function Ee(e){b({url:"./preview?id="+e})}function Ie(e){let a=350*e.avatar.height/e.avatar.width;return a>600&&(a=600),a<100&&(a=100),"topic"!=e.type&&(a+=104),{h:a}}const Ge=async()=>{const e=await B();Q.value=e.map((e=>({id:e.id,filter_name:"zh"===ge.value?e.name_zh:e.name_en}))),V.value=Q.value.map((e=>e.filter_name))},Pe=async e=>{var a,t,l,r,i,n,s;if(de.value)Z.value.nEndSuccess(!1),he.value=!1;else try{const s=await q({page:e,category_id:ne.value,city_id:se.value,sort:oe.value,pageSize:10});if(200!==s.statusCode||!s.data.success)return console.error("API返回错误:",null==(a=s.data)?void 0:a.error),1===e&&(null==(t=$.value)||t.clear()),void Z.value.nEndSuccess(!1);const{items:o,pagination:p}=s.data.data;if(!o||0===o.length)return 1===e&&(null==(l=$.value)||l.clear(),N.value=[]),Z.value.nEndSuccess(!1),void(de.value=!0);const c=o.map((e=>({id:e.id,sort:e.min_price||0,avatar:e.avatar,name_zh:e.name,name_en:e.name_en,jobid:e.id,region:e.city_id,agency:e.badge||"",logo:null,tags:e.tags,price:e.min_price||0,create_time:new Date(e.created_at).getTime(),age:e.age,height:e.height,gender:e.gender,badge:e.badge,nationality:e.nationality,browser_count:e.browser_count,sale_count:e.sale_count})));e>=2?(N.value=N.value.concat(c),null==(r=$.value)||r.concat(c),Z.value.nEndSuccess(!0),de.value=!p.hasMore):(N.value=c,null==(i=$.value)||i.clear(),null==(n=$.value)||n.set(c),de.value=!p.hasMore,he.value=!1)}catch(o){console.error("加载数据失败:",o),Z.value.nEndSuccess(!1),1===e&&(N.value=[],null==(s=$.value)||s.clear())}};function Re(){ue.value.show({text:"Search is unavailable",type:"error",mode:"small",textType:"forth",icon:"smile",iconType:"forth",iconSize:"s"})}return(e,a)=>{const t=w,l=p,r=S(n("n-search"),j),i=S(n("n-icon"),C),b=S(n("n-navbar"),z),T=S(n("n-skeleton"),W),B=S(n("n-tabs-h"),H),q=S(n("n-divider"),F),D=S(n("n-waterfall-view"),E),L=S(n("n-waterfall"),I),Y=k,K=S(n("n-popup"),G),N=S(n("n-toast"),P);return c(),s(l,{class:"homelayout"},{default:o((()=>[u(b,{bgType:"dark",height:80,centerStyle:"width:450rpx;"},{left:o((()=>[u(l,{class:"n-flex-row n-wrap-nowrap",style:{"margin-left":"-10rpx"}},{default:o((()=>[u(t,{onClick:He,src:R,mode:"aspectFill",style:{width:"64rpx",height:"64rpx"}})])),_:1}),u(l,{style:{width:"560rpx","margin-left":"20rpx"}},{default:o((()=>[u(r,{onConfirm:Re,valueType:"forth",iconType:"inverse",placeType:"second",placeIconType:"second",fixIcon:!0,space:"20rpx",valueBoxStyle:"middle",border:"all-inverse",bgType:"middle",placeholder:"Find in liked therapists",boxStyle:"height:80rpx;"})])),_:1})])),right:o((()=>[u(l,{style:{width:"48rpx","padding-left":"80rpx","margin-right":"12rpx"}},{default:o((()=>[u(i,{onClick:We,name:"service",type:"forth",size:"ll"})])),_:1})])),_:1}),he.value?(c(),s(l,{key:0,style:{"min-height":"100vh"}},{default:o((()=>[u(T,{avatar:!0,avatarWidth:"60rpx",avatarHeight:"46rpx",indicator:!1,rows:1,rowsWidth:["600rpx"],rowsHeight:["24rpx"],rowsAlign:"start",justify:"start",boxStyle:"margin-left:20rpx"}),u(l,{style:{height:"16rpx"}}),u(T,{avatar:!0,avatarWidth:"60rpx",avatarHeight:"46rpx",indicator:!1,rows:1,rowsWidth:["400rpx"],rowsHeight:["24rpx"],rowsAlign:"start",justify:"start",boxStyle:"margin-left:20rpx"}),u(l,{style:{height:"16rpx"}}),u(T,{avatar:!0,avatarWidth:"60rpx",avatarHeight:"46rpx",indicator:!1,rows:1,rowsWidth:["200rpx"],rowsHeight:["24rpx"],rowsAlign:"start",justify:"start",boxStyle:"margin-left:20rpx"}),u(l,{class:"n-flex-row n-justify-between n-align-center",style:{"margin-top":"50rpx"}},{default:o((()=>[u(T,{flex:"column",rows:2,avatarWidth:"345rpx",avatarHeight:"400rpx",boxStyle:"margin-left:20rpx",rowsWidth:["300rpx"],rowsHeight:["24rpx"],indicatorWidth:"160rpx",indicatorHeight:"24rpx"}),u(T,{flex:"column",rows:2,avatarWidth:"345rpx",avatarHeight:"400rpx",boxStyle:"margin-right:20rpx",rowsWidth:["300rpx"],rowsHeight:["24rpx"],indicatorWidth:"160rpx",indicatorHeight:"24rpx"})])),_:1}),u(l,{class:"n-flex-row n-justify-between n-align-center",style:{"margin-top":"30rpx"}},{default:o((()=>[u(T,{flex:"column",rows:2,avatarWidth:"345rpx",avatarHeight:"400rpx",boxStyle:"margin-left:20rpx",rowsWidth:["300rpx"],rowsHeight:["24rpx"],indicatorWidth:"160rpx",indicatorHeight:"24rpx"}),u(T,{flex:"column",rows:2,avatarWidth:"345rpx",avatarHeight:"400rpx",boxStyle:"margin-right:20rpx",rowsWidth:["300rpx"],rowsHeight:["24rpx"],indicatorWidth:"160rpx",indicatorHeight:"24rpx"})])),_:1})])),_:1})):d("",!0),he.value?d("",!0):(c(),s(l,{key:1},{default:o((()=>[u(l,{class:"select n-flex-row"},{default:o((()=>[u(l,{onClick:be,class:h("title"+ae.value)},{default:o((()=>[v(x(f(J)("all")),1)])),_:1},8,["class"]),u(l,{class:"content"},{default:o((()=>[u(B,{value:le.value,items:V.value,delay:50,bgType:"dark",textType:"third",activeTextType:"forth",textSize:"ss",activeTextSize:"ss",isTap:!0,left:"12rpx",space:"24rpx",right:"30rpx",width:"0",scrollSize:"620rpx",indicatorType:"warning",height:"64rpx",indicatorWidth:"60rpx",onChange:Te},null,8,["value","items"])])),_:1})])),_:1}),u(l,{class:"select n-flex-row"},{default:o((()=>[u(l,{onClick:je,class:h("title"+te.value)},{default:o((()=>[v(x(f(J)("all")),1)])),_:1},8,["class"]),u(l,{class:"content"},{default:o((()=>[u(B,{value:re.value,items:ye.value,delay:50,bgType:"dark",textType:"third",activeTextType:"forth",textSize:"ss",activeTextSize:"ss",isTap:!0,left:"12rpx",space:"24rpx",right:"30rpx",width:"0",scrollSize:"620rpx",indicatorType:"warning",height:"64rpx",indicatorWidth:"60rpx",onChange:Se},null,8,["value","items"])])),_:1})])),_:1}),u(l,{class:"select n-flex-row"},{default:o((()=>[u(l,{class:"title2"},{default:o((()=>[v(x(f(J)("sort")),1)])),_:1}),u(l,{class:"content"},{default:o((()=>[u(B,{bgType:"dark",textType:"third",value:ie.value,hasIndicator:!1,textSize:"ss",activeTextSize:"ss",isTap:!0,items:_e.value,delay:50,left:"12rpx",space:"24rpx",right:"30rpx",activeTextType:"dark",height:"64rpx",width:"0",scrollSize:"620rpx",indicatorWidth:"60rpx",indicatorType:"dark",activeTextStyle:"font-size: 22rpx;background-color: #fba507;color: #000;padding: 6rpx 12rpx;border-radius:6rpx",onChange:Ce},null,8,["value","items"])])),_:1})])),_:1})])),_:1})),u(q,{bgType:"middle",style:{"margin-top":"10rpx"}}),u(l,{ref:e=>function(e,a){e&&(me[a]=e)}(e,"slideFade"),class:"ai-item",style:_(fe.value)},{default:o((()=>[u(L,{ref_key:"nlist",ref:Z,style:{"background-color":"#19191f"},noMoreText:"no more",loadingText:"loading",bgType:"inverse",autoUpdate:!0,onDown:Pe,onUp:Pe,columnCount:2,leftGap:"20rpx",rightGap:"20rpx",columnGap:"10rpx"},{header:o((()=>[u(l,{style:{height:"20rpx"}})])),default:o((()=>[u(D,{ref_key:"water",ref:$,leftGap:"20rpx",rightGap:"20rpx",columnGap:"10rpx",calculator:Ie},{left:o((({lefts:e})=>[(c(!0),g(y,null,m(e,((e,a)=>(c(),g(y,null,[0===e.tags.type?(c(),s(O,{onClick:a=>Ee(e.id),key:a,item:e},null,8,["onClick","item"])):d("",!0),1===e.tags.type?(c(),s(U,{onClick:a=>Ee(e.id),key:a,item:e},null,8,["onClick","item"])):d("",!0)],64)))),256))])),right:o((({rights:e})=>[(c(!0),g(y,null,m(e,((e,a)=>(c(),g(y,null,[0===e.tags.type?(c(),s(O,{onClick:a=>Ee(e.id),key:a,item:e},null,8,["onClick","item"])):d("",!0),1===e.tags.type?(c(),s(U,{onClick:a=>Ee(e.id),key:a,item:e},null,8,["onClick","item"])):d("",!0)],64)))),256))])),_:1},512)])),_:1},512)])),_:1},8,["style"]),u(K,{show:pe.value,pos:"center",width:"572rpx",height:"400rpx",onOverlayClicked:ze},{default:o((()=>[u(l,{class:"cp"},{default:o((()=>[u(l,{class:"cp-token"}),u(l,{class:"cp-body"},{default:o((()=>[u(l,{class:"cp-title"},{default:o((()=>[v(" 联系客服")])),_:1}),u(l,{class:"cp-action"},{default:o((()=>[u(l,{class:"icon-container n-flex-row n-align-center n-justify-between"},{default:o((()=>[(c(),g(y,null,m(ce,((e,a)=>u(t,{key:a,src:e.src,class:"icon-img",mode:"aspectFill",onClick:a=>{return t=e.link,void("undefined"!=typeof plus?plus.runtime.openURL(t):window.open(t,"_blank"));var t}},null,8,["src","onClick"]))),64))])),_:1})])),_:1}),u(l,{class:"cp-tips"},{default:o((()=>[u(Y,{class:"n-color-warning"},{default:o((()=>[v("(*请联系上方客服预约)")])),_:1})])),_:1})])),_:1})])),_:1})])),_:1},8,["show"]),u(A,{show:xe.value,onCancel:Fe},null,8,["show"]),u(M,{show:ve.value,onCancel:Fe},null,8,["show"]),u(N,{ref_key:"toast",ref:ue},null,512)])),_:1})}}},[["__scopeId","data-v-b33bffc8"]]);export{Y as default};

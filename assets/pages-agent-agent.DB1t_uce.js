import{r as a,K as e,g as t,a as l,am as s,b as o,d as n,w as i,i as r,o as u,e as p,h as d,t as c,m,k as f,l as v,F as g,p as y,f as _,v as h}from"./index-DyB-GtSf.js";import{_ as x}from"./n-icon.C34IfF9H.js";import{o as k,r as j}from"./uni-app.es.CYr7Wecl.js";import{_ as b}from"./n-position.Dmy_Nsnx.js";import{_ as w}from"./n-tabs-h.M46Ayuc-.js";import{_ as C}from"./n-divider.5GELhiLD.js";import{_ as T,a as S}from"./n-waterfall.D5mLKZ7h.js";import{a as G,b as z}from"./apis.CyB1vCjv.js";import{g as E,a as M}from"./goodsClubCell.Bc3gcORI.js";import{_ as N}from"./_plugin-vue_export-helper.BCo6x5W8.js";import"./props.CkprGx8I.js";import"./system.Bdz65IDa.js";import"./n-badge.U9JWwHKe.js";import"./usePager.Bx7XEHLh.js";import"./element.B9OwrRfy.js";import"./imgs.wUGTdslH.js";const D=N({__name:"agent",setup(N){const D=a(""),O=a(["Notes"]),F=a(0),J=a([]),K=a(null),P=a(null),U=a(0),$=a(""),q=a(""),A=a(""),H=a("");a(-1),a(-1),a(0);const I=a(!1),L=a(!1);e((()=>{(()=>{const a=[["#2f3a52","#594d56"],["#112130","#3a4f64"],["#10252a","#3c272e"]],e=a[Math.floor(Math.random()*a.length)];D.value=`linear-gradient(${e[0]}, ${e[1]})`})()})),k((a=>{$.value=t("lang"),U.value=a.id,"th"===$.value&&"2"!==a.id&&"5"!==a.id&&l({url:"/pages/index/empty"}),1!=U.value&&null!=U.value&&0!=U.value||l({url:"/pages/index/index"}),L.value=!0,R()}));const R=async()=>{let a=await G({id:U.value});200===a.data.status&&(q.value=a.data.data.name,A.value=a.data.data.logo,H.value=a.data.data.profile,s({title:q.value+" - incallPro"}))},W=async a=>{if(I.value)K.value.nEndSuccess(!1),L.value=!1;else{let e=await z({page:a,id:U.value}),t=e.data.status;if(404===t&&1===a)console.log("no data"),P.value.clear();else if(404===t&&1!=a)console.log("no more"),K.value.nEndSuccess(!1);else{let t=e.data.data.map((a=>({id:a.id,sort:a.sort,avatar:JSON.parse(a.avatar),name:a.name,jobid:a.job_id,region:a.region,agency:a.agent_name,logo:a.agent_logo,tags:JSON.parse(a.tags),price:a.price,create_time:new Date(a.create_time).getTime()})));a>=2?(J.value=J.value.concat(t),P.value.concat(t),K.value.nEndSuccess(!0),t.length<10&&(I.value=!0)):(J.value=t,P.value.clear(),P.value.set(t),t.length<10&&(I.value=!0),L.value=!1)}}};function X(a){let e=350*a.avatar.height/a.avatar.width;return e>600&&(e=600),e<100&&(e=100),"topic"!=a.type&&(e+=104),{h:e}}function B(a){h({url:"../index/preview?id="+a})}function Q(){l({url:"../index/index"})}return(a,e)=>{const t=j(o("n-icon"),x),l=r,s=j(o("n-position"),b),h=y,k=j(o("n-tabs-h"),w),G=j(o("n-divider"),C),z=j(o("n-waterfall-view"),T),N=j(o("n-waterfall"),S);return u(),n(l,{class:"homelayout"},{default:i((()=>[p(l,{class:"layout",style:m({background:D.value})},{default:i((()=>[p(s,{pos:"top",offset:"x-50rpx",boxStyle:"left:40rpx"},{default:i((()=>[p(l,{class:"goHome",onClick:Q},{default:i((()=>[p(t,{onClick:Q,name:"arrow-left",type:"forth",size:"ll"})])),_:1})])),_:1}),p(l,{class:"userinfo"},{default:i((()=>[p(l,{class:"avatar"},{default:i((()=>[p(h,{src:A.value,mode:"aspectFill"},null,8,["src"])])),_:1}),p(l,{class:"title"},{default:i((()=>[d(c(q.value),1)])),_:1}),p(l,{class:"info n-color-second n-size-ss"},{default:i((()=>[d(c(H.value),1)])),_:1})])),_:1})])),_:1},8,["style"]),p(l,{class:"content n-color-forth n-size-s"},{default:i((()=>[p(l,{class:"notes"},{default:i((()=>[p(k,{value:F.value,items:O.value,bgType:"dark",textType:"third",activeTextType:"forth",isTap:!0,space:"24rpx",justify:"center",width:"0",scrollSize:"120rpx",indicatorType:"error",height:"64rpx",indicatorWidth:"30rpx"},null,8,["value","items"])])),_:1}),p(G,{bgType:"middle",style:{"margin-top":"10rpx"}}),p(N,{ref_key:"nlist",ref:K,style:{"background-color":"#19191f"},noMoreText:"no more",loadingText:"loading",bgType:"inverse",autoUpdate:!0,onDown:W,onUp:W,columnCount:2,leftGap:"20rpx",rightGap:"20rpx",columnGap:"10rpx"},{header:i((()=>[p(l,{style:{height:"20rpx"}})])),default:i((()=>[p(z,{ref_key:"water",ref:P,leftGap:"20rpx",rightGap:"20rpx",columnGap:"10rpx",calculator:X},{left:i((({lefts:a})=>[(u(!0),f(g,null,v(a,((a,e)=>(u(),f(g,null,[0===a.tags.type?(u(),n(E,{onClick:e=>B(a.id),key:e,item:a},null,8,["onClick","item"])):_("",!0),1===a.tags.type?(u(),n(M,{onClick:e=>B(a.id),key:e,item:a},null,8,["onClick","item"])):_("",!0)],64)))),256))])),right:i((({rights:a})=>[(u(!0),f(g,null,v(a,((a,e)=>(u(),f(g,null,[0===a.tags.type?(u(),n(E,{onClick:e=>B(a.id),key:e,item:a},null,8,["onClick","item"])):_("",!0),1===a.tags.type?(u(),n(M,{onClick:e=>B(a.id),key:e,item:a},null,8,["onClick","item"])):_("",!0)],64)))),256))])),_:1},512)])),_:1},512)])),_:1})])),_:1})}}},[["__scopeId","data-v-d59aba27"]]);export{D as default};
